---
title: –ï–¥–∏–Ω—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫ –∏ CI-CD –¥–ª—è Gostdown
toc: true
toc_label: "–°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ"
tags:
  - ru
categories:
  - docops
---

[Gostdown](https://gitlab.iaaras.ru/iaaras/gostdown) - –∑–∞–º–µ—á–∞—Ç–µ–ª—å–Ω—ã–π –ø—Ä–æ–µ–∫—Ç –¥–ª—è –Ω–∞—Å, –Ω–µ—Å—á–∞—Å—Ç–Ω—ã—Ö, –∫—Ä–µ–ø–∫–æ –∑–∞–≤—è–∑–∞–Ω–Ω—ã—Ö –Ω–∞ Microsoft Word. –ò –≤—Å–µ –∂–µ –≤ –æ—Å–Ω–æ–≤–Ω–æ–π –≤–µ—Ä—Å–∏–∏ –∫–æ–µ-—á–µ–≥–æ –≤–∞–∂–Ω–æ–≥–æ –µ–º—É –Ω–µ —Ö–≤–∞—Ç–∞–µ—Ç: —Ç—Ä—É—à–Ω–æ–≥–æ single source, –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –∏ CI/CD. –ù–æ –Ω–µ—Ç –Ω–∏—á–µ–≥–æ –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ–≥–æ –¥–ª—è –ª–µ–Ω–∏–≤–æ–≥–æ —Ç–µ—Ö–ø–∏—Å–∞, –∫–æ—Ç–æ—Ä—ã–π —Ö–æ—á–µ—Ç, —á—Ç–æ–±—ã –æ–Ω–æ –≤—Å–µ —Å–∞–º–æ!

# Single Source –∏ CI/CD –¥–ª—è Gostdown

–ú–æ–π –ø–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω—ã–π —Ñ—Ä–µ–π–º–≤–æ—Ä–∫ –æ–ø–∏—Å–∞–Ω –≤ –¥–≤—É—Ö –ø—Ä–µ–¥—ã–¥—É—â–∏—Ö –ø–æ—Å—Ç–∞—Ö ([DocOps –∏–∑ –∫–æ—Å—Ç—ã–ª–µ–π –∏ –ø–∞–ª–æ–∫](https://annjulyleon.github.io/docops/docops-gostdown/) –∏ [–ü—Ä–æ–≤–µ—Ä–∫–∞ –æ—Ä—Ñ–æ–≥—Ä–∞—Ñ–∏–∏ —Å LanguageTool –∏ Vale](https://annjulyleon.github.io/docops/docops-spelling/)). 
–î–ª—è —ç—Ç–æ–≥–æ –ø–æ—Å—Ç–∞ —è —Ç–∞–∫–∂–µ –ø–æ–¥–≥–æ—Ç–æ–≤–∏–ª–∞ –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π [demo-gostdown-plus](https://github.com/annjulyleon/demo-gostdown-plus). –≠—Ç—É –≤–µ—Ä—Å–∏—è —É—Å–ø–µ—à–Ω–æ –æ—Ç—Ä–∞–±–æ—Ç–∞–ª–∞ –Ω–∞ –ø–æ—Å–ª–µ–¥–Ω–µ–π –≤–µ—Ä—Å–∏–∏ pandoc (3.1) –∏ pandoc-crossref (v0.3.15.1).

–í —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ –µ—Å—Ç—å README, –≤ –∫–æ—Ç–æ—Ä–æ–º –æ–ø–∏—Å–∞–Ω –±—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç –ø—Ä–æ–µ–∫—Ç–∞. –í —ç—Ç–æ–º –ø–æ—Å—Ç–µ —è –æ–ø–∏—à—É –Ω–æ–≤—ã–µ —Ñ–∏—á–∏ —á—É—Ç—å –ø–æ–¥—Ä–æ–±–Ω–µ–µ, –∞ —Ç–∞–∫–∂–µ —Ä–∞—Å—Å–∫–∞–∂—É, –∫–∞–∫ –ø—Ä–∏–∫—Ä—É—Ç–∏—Ç—å –∫ –ø—Ä–æ–µ–∫—Ç—É CI/CD –Ω–∞ GitLab.

–í —á–µ–º –æ—Ç–ª–∏—á–∏—è –æ—Ç –æ—Å–Ω–æ–≤–Ω–æ–π –≤–µ—Ä—Å–∏–∏:

1. –ú–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ–¥–∏–Ω —à–∞–±–ª–æ–Ω –¥–ª—è –≤—Å–µ—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤: –ø—Ä–∏–∫—Ä—É—á–µ–Ω —Å–∫—Ä–∏–ø—Ç [update_docx_props](https://github.com/annjulyleon/doc-scripts/tree/main/update_docx_props). –¢–µ–ø–µ—Ä—å –≤ –∫–æ–Ω—Ñ–∏–≥–∞—Ö –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞ –º–æ–∂–Ω–æ –∑–∞–¥–∞–≤–∞—Ç—å –µ–≥–æ –Ω–∞–∑–≤–∞–Ω–∏–µ, –¥–µ—Ü–∏–º–∞–ª—å–Ω—ã–µ –Ω–æ–º–µ—Ä–∞ –∏ –≤–æ–æ–±—â–µ –ª—é–±—ã–µ –ø–æ–ª—è.
2. –ö–æ–º–∞–Ω–¥–∞ –∑–∞–ø—É—Å–∫–∞ pandoc –≤ —Å–∫—Ä–∏–ø—Ç–µ `build.ps1` Gostdown –º–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–∞. –¢–µ–ø–µ—Ä—å –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ñ–∏–ª—å—Ç—Ä—ã pandoc. –î–æ–±–∞–≤–ª–µ–Ω—ã —Ñ–∏–ª—å—Ç—Ä—ã –¥–ª—è –≤–∫–ª—é—á–µ–Ω–∏—è —Ñ–∞–π–ª–æ–≤ (`include_files.lua`) –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö (`metadata_processor.lua`). Single-source —Ä—É–ª–∏—Ç!
3. –ü—Ä–∏–∫—Ä—É—á–µ–Ω–∞ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Å–æ–±–∏—Ä–∞—Ç—å –ø—Ä–æ—Å—Ç–æ–π –æ–¥–Ω–æ—Å—Ç—Ä–∞–Ω–∏—á–Ω—ã–π HTML –ø—Ä–æ—Å—Ç—ã–º pandoc.
4. –û—Ç–ª–∞–∂–µ–Ω—ã Tasks –¥–ª—è VSCode. –¢–∞—Å–∫–∏ –ø–æ–∑–≤–æ–ª—è—é—Ç –∑–∞–ø—É—Å–∫–∞—Ç—å —Å–∫—Ä–∏–ø—Ç—ã –±–µ–∑ –≤—Å—è–∫–∏—Ö bat-–Ω–∏–∫–æ–≤, —á—Ç–æ —É–º–µ–Ω—å—à–∞–µ—Ç –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ. –û–¥–∏–Ω —Å–∫—Ä–∏–ø—Ç `build.ps1` –¥–ª—è –±–∏–ª–¥–∞ –¥–æ–∫–æ–≤ rules them all.
5. –ü—Ä–∏–∫—Ä—É—á–µ–Ω–∞ [–ø—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤–æ–ø–∏—Å–∞–Ω–∏—è —Å Vale](https://annjulyleon.github.io/docops/docops-spelling/). –≠—Ç–∞ –æ—á–µ–Ω—å –ø–æ–ª–µ–∑–Ω–∞—è —à—Ç—É–∫–∞ –ø—Ä–æ—Å—Ç–æ —Å–ø–∞—Å–∞–µ—Ç –º–Ω–µ –∂–∏–∑–Ω—å –ø—Ä–∏ –ø–µ—Ä–µ–Ω–æ—Å–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ —Å –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–π –≤–∏–∫–∏, –æ—Ç–ª–∏—á–Ω–æ –æ—Ç–ª–∞–≤–ª–∏–≤–∞–µ—Ç —Å–ª–µ–Ω–≥.
6. –ß—Ç–æ–±—ã –ª—é–±–æ–π —á–∞–π–Ω–∏–∫ –º–æ–≥ —Å–æ–±—Ä–∞—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç –ø—Ä—è–º–æ –≤ GitLab, –ø—Ä–∏–∫—Ä—É—á–µ–Ω CI/CD (CI/CD –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∏–∑ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è Gostdown —É –º–µ–Ω—è –Ω–µ –∑–∞—Ä–∞–±–æ—Ç–∞–ª–∞).

–ü—Ä–æ–µ—Ö–∞–ª–∏.

## –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–≤–æ–π—Å—Ç–≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞

–í Gostdown –¥–ª—è —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞ docx –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —à–∞–±–ª–æ–Ω, –≤ –∫–æ—Ç–æ—Ä–æ–º –∑–∞–¥–∞–µ—Ç—Å—è —Ç–∏—Ç—É–ª, –Ω–∞–∑–≤–∞–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞, –¥–µ—Ü–∏–º–∞–ª—å–Ω—ã–π –Ω–æ–º–µ—Ä –∏ –ø—Ä–æ—á–∏–µ –æ–±—â–∏–µ —Å–≤–µ–¥–µ–Ω–∏—è. 
–ï—Å–ª–∏ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –≤ –ø—Ä–æ–µ–∫—Ç–µ –º–Ω–æ–≥–æ, —Ç–æ –¥–µ—Ä–∂–∞—Ç—å –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ –Ω–µ—Å–∫–æ–ª—å–∫–æ —à–∞–±–ª–æ–Ω–æ–≤ —Ä–∞—Å—Ç–æ—á–∏—Ç–µ–ª—å–Ω–æ, –æ—Å–æ–±–µ–Ω–Ω–æ, –µ—Å–ª–∏ –æ—Ç–ª–∏—á–∞—é—Ç—Å—è –æ–Ω–∏ —Ç–æ–ª—å–∫–æ –Ω–∞–∑–≤–∞–Ω–∏–µ–º –∏ –¥–µ—Ü–∏–º–∞–ª—å–Ω—ã–º–∏ –Ω–æ–º–µ—Ä–∞–º–∏.

–ö —Å—á–∞—Å—Ç—å—é, —É –º–µ–Ω—è —É–∂–µ –µ—Å—Ç—å —Å–∫—Ä–∏–ø—Ç –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –ø–æ–ª–µ–π –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ [update_docx_props](https://github.com/annjulyleon/doc-scripts/tree/main/update_docx_props). 
–ü–æ–Ω–∞–¥–æ–±–∏–ª–∞—Å—å –ª–∏—à—å –¥–æ—Ä–∞–±–æ—Ç–∫–∞ –Ω–∞–ø–∏–ª—å–Ω–∏–∫–æ–º, —á—Ç–æ–±—ã –º–æ–∂–Ω–æ –±—ã–ª–æ –≤—ã–∑—ã–≤–∞—Ç—å —Å–∫—Ä–∏–ø—Ç –¥–ª—è –æ–¥–Ω–æ–≥–æ —Ñ–∞–π–ª–∞ (—ç—Ç–∞ –≤–µ—Ä—Å–∏—è –ª–µ–∂–∏—Ç [–≤–æ—Ç —Ç—É—Ç](https://github.com/annjulyleon/doc-scripts/tree/main/update_docx_props/update_docx_props_single), —Ä—è–¥—ã—à–∫–æ–º). 

–ü–æ–ª—É—á–∞–µ—Ç—Å—è –≤–æ—Ç —Ç–∞–∫–æ–π workflow:

1. –°–æ–±—Ä–∞—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç. –î–æ–∫—É–º–µ–Ω—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é `/build` (–Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è –≤ —Ç–∞—Å–∫–µ).
2. –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–∞—Å–∫—É ¬´Update docx fields¬ª. –í—ã–±—Ä–∞—Ç—å –∏–∑ —Å–ø–∏—Å–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç (–¥–æ–∫—É–º–µ–Ω—Ç —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –Ω–∞–∑–≤–∞–Ω–∏—é —Ñ–∞–π–ª–∞ –∏ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏).
3. –°–∫—Ä–∏–ø—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å–≤–æ–π—Å—Ç–≤ –±—É–¥–µ—Ç –∑–∞–ø—É—â–µ–Ω –¥–ª—è –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞. 

–ù–∞—Å—Ç—Ä–æ–π–∫–∞:

1. –°–æ–∑–¥–∞—Ç—å –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –ø—Ä–æ–µ–∫—Ç–∞ –ø–∞–ø–∫—É `/build`.
2. –í –ø–∞–ø–∫—É `scripts` —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å —Å–∫—Ä–∏–ø—Ç `update_docx_props.ps1`.
3. –í –ø–∞–ø–∫–µ `scripts/configs` —Å–æ–∑–¥–∞—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π —Ñ–∞–π–ª –¥–ª—è –¥–æ–∫—É–º–µ–Ω—Ç–∞ —Å —Ç–∞–∫–∏–º –∂–µ –∏–º–µ–Ω–µ–º, –∫–∞–∫ –ø–∞–ø–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞ (–≤—Å–µ —ç—Ç–æ –∫–æ–Ω–µ—á–Ω–æ –∂–µ –º–æ–∂–Ω–æ –º–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å –≤ —Å–∫—Ä–∏–ø—Ç–µ –∏–ª–∏ —Ç–∞—Å–∫–µ). –í –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω–æ–º —Ñ–∞–π–ª–µ —É–∫–∞–∑–∞—Ç—å —Å–≤–æ–π—Å—Ç–≤–∞, –∫–æ—Ç–æ—Ä—ã–µ –Ω—É–∂–Ω–æ –æ–±–Ω–æ–≤–ª—è—Ç—å.
   
   ```xml
   <?xml version="1.0"?>
   <configuration>
      <customProperties>
        <add key="DeviceName" value="–ö—Ä–∞—Å–∏–≤–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ"/>
        <add key="DocTitle" value="–û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–≥—Ä–∞–º–º—ã"/>
        <add key="DecimalNumber" value="–ê–ë–í–ì.00002 01 13"/>
        <add key="DocSubtitle" value="–ü–æ–¥–∑–∞–≥–æ–ª–æ–≤–æ–∫"/>
        <add key="DocYear" value="2023"/>
    </customProperties>
    <builtinProperties>
        <add key="Title" value="–ö—Ä–∞—Å–∏–≤–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ. –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–≥—Ä–∞–º–º—ã"/>
        <add key="Subject" value="–ö—Ä–∞—Å–∏–≤–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ"/>
        <add key="Keywords" value="description"/>
        <add key="Comments" value="2023"/>
    </builtinProperties>
    <vsdProperties>
    </vsdProperties>
   </configuration>
   ```

4. –°–æ–∑–¥–∞—Ç—å —Ç–∞—Å–∫—É –¥–ª—è VS Code –≤ `.vscode/tasks.json`:
   
   ```json
   {
            "label": "Update docx fields",
            "detail": "Update builded document",
            "type": "shell",
            "options": {
                "cwd": "${workspaceFolder}/build/"
            },
            "command": "${workspaceFolder}\\scripts\\update_docx_props.ps1 -dir ${workspaceFolder}\\build -conf ${workspaceFolder}\\scripts\\configs\\${input:doc}.xml -filename ${input:doc}.docx",
            "presentation": {
                "echo": true,
                "reveal": "always",
                "focus": false,
                "panel": "shared",
                "showReuseMessage": false,
                "clear": true
            }
        }
   ```

5. –í —Ç–∞—Å–∫–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è [input variables](https://code.visualstudio.com/docs/editor/variables-reference#_input-variables). –ò—Ö —É–¥–æ–±–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å, –Ω–∞–ø—Ä–∏–º–µ—Ä, –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –æ–¥–Ω–æ–π —Ç–∞—Å–∫–∏ –¥–ª—è –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π:
   
   ```json
   "inputs": [
        {
            "id": "doc",
            "description": "Document Path: ",
            "type": "pickString",
            "options": [
                "example_doc",
                "another_doc"
            ],
            "default": "example_doc"
       },
    ]
   ```

–í—Å–µ, —Ç–µ–ø–µ—Ä—å –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ —ç—Ç–æ–π —Ç–∞—Å–∫–µ, —Å–æ–±—Ä–∞–Ω–Ω—ã–π –¥–æ–∫—É–º–µ–Ω—Ç –≤ `build` –±—É–¥–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∞–Ω, –Ω–∞–∑–≤–∞–Ω–∏–µ, –≥–æ–¥, –¥–µ—Ü–∏–º–∞–ª—å–Ω—ã–π –Ω–æ–º–µ—Ä –æ–±–Ω–æ–≤–ª–µ–Ω.

## –î–æ–±–∞–≤–ª—è–µ–º single-source –∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ

–í –æ–±—â–µ–º —è –Ω–µ –¥—É–º–∞–ª–∞, —á—Ç–æ –º–Ω–µ –æ–ø—è—Ç—å –ø–æ–Ω–∞–¥–æ–±–∏—Ç—å—Å—è single-source, –Ω–æ ~~–∂–∏–∑–Ω—å~~ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–≥–æ –∑–∞–¥–∞–Ω–∏—è —Ä–∞—Å–ø–æ—Ä—è–¥–∏–ª–∏—Å—å –∏–Ω–∞—á–µ. 9 –∫–æ–º–ø–ª–µ–∫—Ç–æ–≤ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ —Å –±–æ–ª—å—à–∏–º–∏ –æ–±—â–∏–º–∏ –∫—É—Å–∫–∞–º–∏, –∫—É—Å–∫–∞–º–∏, –æ—Ç–ª–∏—á–∞—é—â–∏–º–∏—Å—è —Ç–æ–ª—å–∫–æ –Ω–∞–∑–≤–∞–Ω–∏–µ–º –ü–û - –±–µ–∑ single source —Ç—É—Ç —Å —É–º–∞ —Å–æ–π–¥–µ—à—å.

–í–æ—Ç –∫–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:

1. –§–∞–π–ª—ã —Å –æ–±—â–∏–º–∏ –∫—É—Å–∫–∞–º–∏ —Ç–µ–∫—Å—Ç–∞ –ª–µ–∂–∞—Ç –≥–¥–µ-—Ç–æ –≤ –æ–±—â–µ–π –ø–∞–ø–∫–µ. –í –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–æ–Ω–Ω–æ–º —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ —ç—Ç–æ `docs_gost/single_source`.
2. –í —Ñ–∞–π–ª–µ –∏–ª–∏ —Ñ–∞–π–ª–∞—Ö –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –≤ `docs_gost/example_doc`) –≤—Å—Ç–∞–≤–ª—è–µ–º –≤ –Ω—É–∂–Ω—ã–µ –º–µ—Å—Ç–∞ —Ñ–∞–π–ª—ã –∏–∑ `docs_gost/single_source` —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–º —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–æ–º.
3. –í —à–∞–ø–∫–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞ (–≤ YAML-–ø—Ä–µ–∞–º–±—É–ª–µ) –¥–æ–±–∞–≤–ª—è–µ–º —Å–≤–æ–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –≤ `docs_gost/single_source/00_begin.md` –¥–æ–±–∞–≤–ª–µ–Ω–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è `soft-name`).
4. –í —Ç–µ–∫—Å—Ç–µ –∫ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –æ–±—Ä–∞—â–∞–µ–º—Å—è –≤–æ—Ç —Ç–∞–∫: `${soft-name}`. –ü—Ä–∏ —Å–±–æ—Ä–∫–µ —Å—é–¥–∞ –±—É–¥–µ—Ç –ø–æ–¥—Å—Ç–∞–≤–ª–µ–Ω–æ –∑–Ω–∞—á–µ–Ω–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –∏–∑ –ø—Ä–µ–∞–º–±—É–ª—ã.
5. –ú–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –∫–æ–º–∞–Ω–¥–∞ pandoc –≤ `build.ps1` –ø—Ä–∏–º–µ–Ω—è–µ—Ç –≤—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ —Ñ–∏–ª—å—Ç—Ä—ã –∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç. –ê –∑–∞—Ç–µ–º –ø–µ—Ä–µ–¥–∞–µ—Ç —É–∂–µ –æ—Å–Ω–æ–≤–Ω–æ–º—É —Å–∫—Ä–∏–ø—Ç—É `build.ps1`, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–∏–º–µ–Ω—è–µ—Ç —à–∞–±–ª–æ–Ω –∏ —Ç–≤–æ—Ä–∏—Ç —Å–≤–æ—é COMKbject-–æ–≤—Å–∫—É—é –º–∞–≥–∏—é.

–í –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–æ–Ω–Ω–æ–º —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ `example_doc` –∏–º–µ–µ—Ç –≤—Å–µ –ø–µ—Ä–µ—á–∏—Å–ª–µ–Ω–Ω—ã–µ —Ñ–∏—á–∏: –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é, –≤–∫–ª—é—á–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã –∏ —Ä–∞–∑–Ω–æ–æ–±—Ä–∞–∑–Ω—ã–µ –∫–∞—Ä—Ç–∏–Ω–∫–∏. –ò –¥–∞, –≤ —Ñ–∞–π–ª–∞—Ö-–∏—Å—Ç–æ—á–Ω–∏–∫–∞—Ö (–∫–æ—Ç–æ—Ä—ã–π –≤ `single_source`) —Ç–æ–∂–µ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ, –æ–Ω–∏ –±—É–¥—É—Ç –∑–∞–º–µ–Ω–µ–Ω—ã –Ω–∞ –∑–Ω–∞—á–µ–Ω–∏–µ –∏–∑ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ —Ñ–∞–π–ª–∞. 

–ö —Å—á–∞—Å—Ç—å—é, –¥–æ–±—Ä—ã–µ –ª—é–¥–∏ —É–∂–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∞–ª–∏ –≤—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ —Ñ–∏–ª—å—Ç—Ä—ã, —Ç–∞–∫ —á—Ç–æ –∏—Ö –æ—Å—Ç–∞–ª–æ—Å—å –ø—Ä–æ—Å—Ç–æ –Ω–µ–º–Ω–æ–≥–æ –¥–æ—Ä–∞–±–æ—Ç–∞—Ç—å.

–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π —Ñ–∏–ª—å—Ç—Ä –∏–∑ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è pandoc [include-files](https://github.com/pandoc/lua-filters/tree/master/include-files) —É–∂–µ –¥–µ–ª–∞–µ—Ç –≤—Å–µ, —á—Ç–æ –Ω—É–∂–Ω–æ –¥–ª—è —Å—á–∞—Å—Ç—å—è. –í –¥–æ–∫—É–º–µ–Ω—Ç–µ, –≤ –∫–æ—Ç–æ—Ä—ã–π —Ö–æ—Ç–∏–º —á—Ç–æ-—Ç–æ –≤—Å—Ç–∞–≤–∏—Ç—å –ø–∏—à–µ–º (—Å–º. –ø—Ä–∏–º–µ—Ä):

![Include](/assets/images/posts/2023-03-07-include.png)

–í –∫–æ–º–∞–Ω–¥–µ pandoc –ø–µ—Ä–µ–¥–∞–µ–º –∫–ª—é—á `-M include-auto` , –µ—Å–ª–∏ –Ω—É–∂–Ω–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–Ω—É–º–µ—Ä–æ–≤—ã–≤–∞—Ç—å –∑–∞–≥–æ–ª–æ–≤–∫–∏. –¢–∞–∫–∂–µ –º–æ–∂–Ω–æ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –±–ª–æ–∫–∞ —É–∫–∞–∑—ã–≤–∞—Ç—å [—Å–≤–æ–∏ –ø—Ä–∞–≤–∏–ª–∞ –Ω—É–º–µ—Ä–∞—Ü–∏–∏](https://github.com/pandoc/lua-filters/tree/master/include-files#manual-shifting). –Ø –ø–æ–∫–∞ –æ–±—Ö–æ–∂—É—Å—å `-M include-auto`.

–î–ª—è –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö —Ç–æ–∂–µ —É–∂–µ –Ω–∞–ø–∏—Å–∞–Ω–æ –Ω–µ–º–∞–ª–æ —Ñ–∏–ª—å—Ç—Ä–æ–≤. –Ø –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞–ª–∞ –≤–æ—Ç —ç—Ç–æ—Ç [pandoc-curly-switch](https://github.com/cdivita/pandoc-curly-switch). 

–ú–∏–Ω—É—Å—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —ç—Ç–∏—Ö —Ñ–∏–ª—å—Ç—Ä–æ–≤ -- –Ω–µ –ø–æ–ª–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å mkdocs, —Å –∫–æ—Ç–æ—Ä–æ–π —è –ø–æ–∫–∞ –Ω–µ —Ä–∞–∑–±–∏—Ä–∞–ª–∞—Å—å. –í mkdocs —Ç–æ–∂–µ –µ—Å—Ç—å [–ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ](https://jimandreas.github.io/mkdocs-material/reference/variables/) –∏ –ø–ª–∞–≥–∏–Ω [include](https://github.com/mondeja/mkdocs-include-markdown-plugin), —Ç–∞–∫ —á—Ç–æ –≤–µ—Ä–æ—è—Ç–Ω–æ –∏—Ö –º–æ–∂–Ω–æ —Å–æ–≤–º–µ—Å—Ç–∏—Ç—å —Å pandoc-—Ñ–∏–ª—å—Ç—Ä–∞–º–∏.

–ö–æ–º–∞–Ω–¥–∞ pandoc —Å –Ω–∞—à–∏–º–∏ —Ñ–∏–ª—å—Ç—Ä–∞–º–∏ –¥–ª—è —Ç–µ—Å—Ç–∞:

```bash
pandoc (cat *.md) -o some.docx -M include-auto --lua-filter include_files.lua --lua-filter linebreaks.lua --lua-filter metadata_processor.lua  --filter pandoc-crossref --citeproc --reference-doc template.docx
```

–ê –≤–æ—Ç –∫–æ–º–∞–Ω–¥–∞ –≤—ã–∑–æ–≤–∞ pandoc –≤ —Å–∫—Ä–∏–ø—Ç–µ Gostdown. –ö–∞–∫ –≤–∏–¥–Ω–æ –¥–æ–±–∞–≤–ª–µ–Ω–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è `$luafilter`, –≤ –∫–æ—Ç–æ—Ä–æ–π –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è –ø—É—Ç—å –∫ –ø–∞–ø–∫–µ —Å —Ñ–∏–ª—å—Ç—Ä–∞–º–∏ `.lua`.

```powershell
&$exe $md -o $tempdocx -M include-auto --lua-filter $luafilter\include_files.lua --lua-filter $luafilter\linebreaks.lua --lua-filter $luafilter\metadata_processor.lua  --filter pandoc-crossref --citeproc --reference-doc $template
```

## –û–¥–Ω–æ—Å—Ç—Ä–∞–Ω–∏—á–Ω—ã–π HTML –ø–æ —à–∞–±–ª–æ–Ω—É

mkdocs –∫—Ä—É—Ç, –Ω–æ –Ω–µ –≤—Å–µ–≥–¥–∞ –Ω—É–∂–µ–Ω –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–π —Å–∞–π—Ç —Å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–µ–π. –ò–Ω–æ–≥–¥–∞ –Ω—É–∂–µ–Ω –ø—Ä–æ—Å—Ç–æ –æ–¥–Ω–æ—Å—Ç—Ä–∞–Ω–∏—á–Ω—ã–π HTML —Å –Ω–∞–≤–∏–≥–∞—Ü–∏–µ–π, —á—Ç–æ–±—ã –±—ã—Å—Ç—Ä–æ –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å –∏–Ω–∂–µ–Ω–µ—Ä–∞–º –ø–æ –∑–∞–ø—Ä–æ—Å—É.
–ö —Å—á–∞—Å—Ç—å—é –∑–¥–µ—Å—å –Ω–∏—á–µ–≥–æ —Å–ª–æ–∂–Ω–æ–≥–æ –ø—Ä–∏–¥—É–º—ã–≤–∞—Ç—å –Ω–µ –Ω–∞–¥–æ, —Ç–∞–∫ –∫–∞–∫ pandoc —É–∂–µ –≤—Å–µ —É–º–µ–µ—Ç, –Ω—É–∂–Ω–æ —Ç–æ–ª—å–∫–æ –ø–æ–¥–æ–±—Ä–∞—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ ~~–∑–∞–∫–ª–∏–Ω–∞–Ω–∏–µ~~ –∫–æ–º–∞–Ω–¥—É.

–®–∞–±–ª–æ–Ω –¥–ª—è pandoc –º–æ–∂–Ω–æ –≤–∑—è—Ç—å –≥–æ—Ç–æ–≤—ã–π, —è –∏—Å–ø–æ–ª—å–∑—É—é [easy-pandoc-templates](https://github.com/ryangrose/easy-pandoc-templates) by [ryangrose](https://github.com/ryangrose). –ò—Ö –ª–µ–≥–∫–æ –º–æ–∂–Ω–æ –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞—Ç—å –¥–ª—è —Å–≤–æ–∏—Ö –Ω—É–∂–¥, —Å–∫–∞—á–∞—Ç—å –≤—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ —Ä–µ—Å—É—Ä—Å—ã, —á—Ç–æ–±—ã —à–∞–±–ª–æ–Ω—ã —Ä–∞–±–æ—Ç–∞–ª–∏ –æ—Ñ—Ñ–ª–∞–π–Ω.

–ö–æ–º–∞–Ω–¥–∞ –¥–ª—è –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏ –∫—É—á–∫–∏ .md —Ñ–∞–π–ª–æ–≤ –≤ HTML:

```powershell
pandoc -s $(Get-Content html_include.txt) -f markdown --quiet --template=easy-template.html --lua-filter=include_files.lua --lua-filter=linebreaks.lua --lua-filter=metadata_processor.lua --filter pandoc-crossref --citeproc -o output.html --toc
```

–í —Ñ–∞–π–ª–µ `html_include.txt` –Ω–∞ –∫–∞–∂–¥–æ–π —Å—Ç—Ä–æ–∫–µ –ø–µ—Ä–µ—á–∏—Å–ª–µ–Ω—ã –≤—Å–µ md —Ñ–∞–π–ª—ã, –∫–æ—Ç–æ—Ä—ã–µ —Ö–æ—Ç–∏–º —Å–ª–µ–ø–∏—Ç—å –≤ –æ–¥–Ω–æ—Å—Ç—Ä–∞–Ω–∏—á–Ω—ã–π HTML. –í —Å–∫—Ä–∏–ø—Ç–µ `create_simple_html.ps1` —ç—Ç–∞ –∫–æ–º–∞–Ω–¥–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–∏–∑–æ–≤–∞–Ω–∞, —Ç–∞–∫ —á—Ç–æ –º–æ–∂–Ω–æ –ª–µ–≥–∫–æ –≤—ã–∑—ã–≤–∞—Ç—å —Å–∫—Ä–∏–ø—Ç –≤ —Ç–∞—Å–∫–∞—Ö VSCode. 

–í —Ç–∞—Å–∫–µ VSCode –∫–æ–º–∞–Ω–¥–∞ –¥–ª—è –≤—ã–∑–æ–≤–∞ –ø–æ–ª—É—á–∏–ª–∞—Å—å —Ä–∞–∑–≤–µ—Å–∏—Å—Ç–∞—è, —Ç–∞–∫ –∫–∞–∫ –ø–æ–º–∏–º–æ —Å–±–æ—Ä–∫–∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞, –Ω—É–∂–Ω–æ —Ç–∞–∫–∂–µ —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ –∫–∞—Ä—Ç–∏–Ω–∫–∏. –≠—Ç–æ –¥–µ–ª–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ç–∞—Å–∫–æ–π.
–ö —Å–æ–∂–∞–ª–µ–Ω–∏—é, –∏–∑ —Ç–∞—Å–∫–∏ –Ω–µ –ø–æ–ª—É—á–∏—Ç—Å—è –≤—ã–∑–≤–∞—Ç—å –∫–æ–º–∞–Ω–¥—É –∑–∞–º–µ–Ω—ã –ø—É—Ç–µ–π –∫ –∫–∞—Ä—Ç–∏–Ω–∫–∞–º –Ω–∞–ø—Ä—è–º—É—é, –ø–æ—ç—Ç–æ–º—É –ø—Ä–∏—à–ª–æ—Å—å –∑–∞–ø–∏—Ö–∞—Ç—å –µ—ë –≤ —Å–∫—Ä–∏–ø—Ç `command_to_fix_image_paths.ps1` –∏ –≤ —Ç–∞—Å–∫—É `Fix img path in HTML`. –¢–∞—Å–∫–∞ –ø—Ä–æ—Ö–æ–¥–∏—Ç—Å—è –ø–æ –≤—Å–µ–º .html –≤ –ø–∞–ø–∫–µ `build/web` –∏ –∑–∞–º–µ–Ω—è–µ—Ç –ø—É—Ç–∏ –∫ –∫–∞—Ä—Ç–∏–Ω–∫–∞–º. –í–æ—Ç, —Ç–µ–ø–µ—Ä—å —É –Ω–∞—Å –∫—Ä–∞—Å–∏–≤—ã–π, —Ä–∞–±–æ—á–∏–π HTML. 

## –¢–∞—Å–∫–∏

–Ø —É–∂–µ –Ω–µ–º–Ω–æ–≥–æ –ø–∏—Å–∞–ª–∞ [–ø—Ä–æ —Ç–∞—Å–∫–∏](https://annjulyleon.github.io/docops/docops-gostdown/#tasks) –¥–ª—è –∑–∞–ø—É—Å–∫–∞ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã—Ö –±–∞—Ç–Ω–∏–∫–æ–≤ Gostdown. –ù–æ –≤ —Ç–∞—Å–∫–∞—Ö –º–æ–∂–Ω–æ –≤—ã–∑—ã–≤–∞—Ç—å —Å–∫—Ä–∏–ø—Ç `build.ps1` –Ω–∞–ø—Ä—è–º—É—é –∏ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å –µ–º—É –≤—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã. –≠—Ç–æ –ø–æ–∑–≤–æ–ª–∏–ª–æ —É–±—Ä–∞—Ç—å –∏–∑ –ø—Ä–æ–µ–∫—Ç–∞ –¥—É–±–ª–∏—Ä—É—é—â–∏–µ—Å—è —Å–∫—Ä–∏–ø—Ç—ã –∏ bat, –∏ —Å–æ–∑–¥–∞—Ç—å –æ–¥–Ω—É –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—É—é –∑–∞–¥–∞—á—É –¥–ª—è —Å–±–æ—Ä–∫–∏ –≤—Å–µ—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤.

–†–∞—Å—Å–º–æ—Ç—Ä–∏–º –≤–æ—Ç —Ç–∞–∫—É—é —Ç–∞—Å–∫—É –∏–∑ –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–æ–Ω–Ω–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞:

```json
{
            "label": "Build Doc",
            "detail": "Build selected in docx_include.txt to build docs",
            "type": "shell",
            "options": {
                "cwd": "${workspaceFolder}/docs_gost/${input:doc}/"
            },
            "command": "${workspaceFolder}\\scripts\\build.ps1 -md $(Get-Content docx_include.txt) -template ${workspaceFolder}\\docs_gost\\template.docx -luafilter ${workspaceFolder}\\scripts -docx ${workspaceFolder}\\build\\${input:doc}.docx -embedfonts",
            "presentation": {
                "echo": true,
                "reveal": "always",
                "focus": false,
                "panel": "shared",
                "showReuseMessage": false,
                "clear": true
            },
            "group": {
                "kind": "build",
                "isDefault": false
            }
        }
```

–ö–∞–∫ –≤–∏–¥–Ω–æ, —ç—Ç–æ –ø—Ä–æ—Å—Ç–æ –∫–æ–º–∞–Ω–¥–∞ –∏–∑ `build.bat` —Å–∫—Ä–∏–ø—Ç–∞ Gostdown. –î–æ–±–∞–≤–ª–µ–Ω –ø–∞—Ä–∞–º–µ—Ç—Ä `-luafilter`, –≤ –∫–æ—Ç–æ—Ä–æ–º —É–∫–∞–∑–∞–Ω –ø—É—Ç—å –∫ —Ñ–∏–ª—å—Ç—Ä–∞–º pandoc. –ö—Ä–æ–º–µ —Ç–æ–≥–æ, –æ–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ, —á—Ç–æ–±—ã –æ—Ç—Ä–∞–±–æ—Ç–∞–ª–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –≤—Å–µ —Å–∫—Ä–∏–ø—Ç—ã, —Ä–∞–±–æ—á–∞—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ –≤ –∫–æ—Ä–Ω–µ —Å–æ–±–∏—Ä–∞–µ–º–æ–≥–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞ (–ø–∞—Ä–∞–º–µ—Ç—Ä `options.cwd`). 
–°–ø–∏—Å–æ–∫ —Ñ–∞–π–ª–æ–≤ .md, –∫–æ—Ç–æ—Ä—ã–µ –Ω—É–∂–Ω–æ —Å–æ–±—Ä–∞—Ç—å, —Ç–µ–ø–µ—Ä—å –ª–µ–∂–∞—Ç –≤ —Ñ–∞–π–ª–µ `docx_include.txt` –≤ –∫–æ—Ä–Ω–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞.

–í —Ç–∞—Å–∫–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ [input variables](https://code.visualstudio.com/docs/editor/variables-reference#_input-variables), –æ –∫–æ—Ç–æ—Ä—ã—Ö —É–∂–µ –≥–æ–≤–æ—Ä–∏–ª–æ—Å—å [–≤—ã—à–µ](#–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ-—Å–≤–æ–π—Å—Ç–≤-–¥–æ–∫—É–º–µ–Ω—Ç–∞). –¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, —ç—Ç—É —Ç–∞—Å–∫—É –º–æ–∂–Ω–æ –∑–∞–ø—É—Å–∫–∞—Ç—å –¥–ª—è –≤—Å–µ—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤: –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –±—É–¥–µ—Ç –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–æ –≤—ã–±—Ä–∞—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç –¥–ª—è —Å–±–æ—Ä–∫–∏.

## –ü—Ä–∏–∫—Ä—É—á–∏–≤–∞–µ–º CI/CD –Ω–∞ GitLab

–ò—Ç–∞–∫, –Ω–∞–∫–æ–Ω–µ—Ü-—Ç–æ —è –¥–æ–±—Ä–∞–ª–∞—Å—å –¥–æ —É—Ä–æ–≤–Ω—è —Å –±–æ—Å—Å–æ–º CI/CD. –ü—Ä–∏—à–ª–æ—Å—å –ø—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å –Ω–µ–º–∞–ª–æ –≤—Å—è–∫–∏—Ö –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏–π, –Ω–æ —è —Å–ø—Ä–∞–≤–∏–ª–∞—Å—åüòä. –¢–µ–ø–µ—Ä—å –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ –ø—Ä–æ–µ–∫—Ç–∞ –ª—é–±–æ–π –º–µ–Ω–µ–¥–∂–µ—Ä –∏–ª–∏ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫ –º–æ–∂–µ—Ç —Å–æ–±—Ä–∞—Ç—å —Å–µ–±–µ docx –∏ —Å–∫–∞—á–∞—Ç—å –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã. –ò —Ç–µ–ø–µ—Ä—å —Ç–µ—Ö–ø–∏—Å—É –Ω–µ –Ω—É–∂–Ω–æ —Ç–∞—Å–∫–∞—Ç—å —Å —Å–æ–±–æ–π –≤ –æ—Ç–ø—É—Å–∫ –Ω–æ—É—Ç–±—É–∫!

Gitlab'–æ–≤—Å–∫–∏–π CI/CD —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ –¥–≤—É—Ö –≤–∞–∂–Ω—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –∏ –¥–≤—É—Ö –∫–æ–Ω—Ñ–∏–≥–æ–≤:

- gitlab-runner –Ω—É–∂–Ω–æ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –Ω–∞ –º–∞—à–∏–Ω—É —Å Windows, –Ω–∞ –∫–æ—Ç–æ—Ä–æ–π –±—É–¥–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∞ —Å–±–æ—Ä–∫–∞. –≠—Ç–∞ —Å–ª—É–∂–±–∞ –≤—ã–ø–æ–ª–Ω—è–µ—Ç –≤—Å–µ –Ω—É–∂–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã –¥–ª—è —Å–±–æ—Ä–∫–∏ –Ω–∞—à–µ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞;
- –≤ –ø—Ä–æ–µ–∫—Ç–µ –Ω–∞ —Å–∞–π—Ç–µ Gitlab –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –≤–∫–ª—é—á–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è CI/CD;
- –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞ –¥–æ–ª–∂–µ–Ω —Å—É—â–µ—Å—Ç–≤–æ–≤–∞—Ç—å —Ñ–∞–π–ª `.gitlab-ci.yml` —Å –æ–ø–∏—Å–∞–Ω–∏–µ–º –ø–æ—Ä—è–¥–∫–∞ —Å–±–æ—Ä–∫–∏ (–∫–æ–º–∞–Ω–¥—ã). –í—Å–µ —ç—Ç–æ –±—É–¥–µ—Ç –ø–µ—Ä–µ–¥–∞–Ω–æ gitlab-runner'—É –Ω–∞ –∏—Å–ø–æ–ª–Ω–µ–Ω–∏–µ;
- —Ä—è–¥–æ–º —Å –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–º —Ñ–∞–π–ª–æ–º gitlab-runner –¥–æ–ª–∂–µ–Ω –ª–µ–∂–∞—Ç—å –∫–æ–Ω—Ñ–∏–≥ `config.toml`, –≤ –∫–æ—Ç–æ—Ä–æ–º –æ–ø–∏—Å–∞–Ω—ã –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ Gitlab.

–í—Å–µ –Ω–∏–∂–µ–æ–ø–∏—Å–∞–Ω–Ω—ã–µ –Ω–µ–ø–æ—Ç—Ä–µ–±—Å—Ç–≤–∞ —è –ø—Ä–æ–¥–µ–ª—ã–≤–∞–ª–∞ –Ω–∞ selfhosted Gitlab/Gitlab runner –≤–µ—Ä—Å–∏–∏ 15.8, Windows 10, Microsoft Word 2021. –ü—Ä–µ–¥–ø–æ–ª–∞–≥–∞–µ—Ç—Å—è, —á—Ç–æ —É –≤–∞—Å –µ—Å—Ç—å –ø—Ä–∞–≤–∞ –≤–ª–∞–¥–µ–ª—å—Ü–∞ –ø—Ä–æ–µ–∫—Ç–∞ –Ω–∞ Gitlab'–µ –∏ –≤–æ–∑–º–æ–∂–Ω–æ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø–æ–ª–∏—Ç–∏–∫—É –∑–∞–ø—É—Å–∫–∞ PowerShell —Å–∫—Ä–∏–ø—Ç–æ–≤ –≤ `Unrestricted` –∏ `RemoteSigned`.

–ö—Ä–æ–º–µ —Ç–æ–≥–æ, –Ω–∞ –º–∞—à–∏–Ω–µ, –∫–æ—Ç–æ—Ä—É—é –±—É–¥–µ—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–ª—è —Å–±–æ—Ä–∫–∏, –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –≤–µ—Å—å –Ω–∞–±–æ—Ä –ø—Ä–æ–≥—Ä–∞–º–º: Git, pandoc/pandoc-crossref, Microsoft Word, —à—Ä–∏—Ñ—Ç—ã. 
–†–µ–∫–æ–º–µ–Ω–¥—É—é —Ç–∞–∫–∂–µ –ø–æ—Å—Ç–∞–≤–∏—Ç—å —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ [Gitlab Workflow](https://marketplace.visualstudio.com/items?itemName=GitLab.gitlab-workflow) –¥–ª—è VSCode –¥–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –∫–æ–Ω—Ñ–∏–≥–æ–≤ –∏ –∑–∞–ø—É—Å–∫–∞ –ø–∞–π–ø–ª–∞–π–Ω–æ–≤ –ø—Ä—è–º–æ –∏–∑ VSCode.

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ gitlab-runner

–í –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É–µ—Ç [—Ç—É—Ç–æ—Ä–∏–∞–ª](https://docs.gitlab.com/runner/install/windows.html) –ø–æ —É—Å—Ç–∞–Ω–æ–≤–∫–µ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ gitlab-runner, –æ–¥–Ω–∞–∫–æ –ø—Ä—è–º–æ —Å–∫–∞–∂—É, –Ω–µ –æ—á–µ–Ω—å –æ–Ω –æ—Ç—Ä–∞–∂–∞–µ—Ç —Å—É—Ä–æ–≤—É—é –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–æ–±–ª–µ–º, —Å –∫–æ—Ç–æ—Ä—ã–º–∏ –ø—Ä–∏—à–ª–æ—Å—å —Å—Ç–æ–ª–∫–Ω—É—Ç—å—Å—è.

1. –î–ª—è –Ω–∞—á–∞–ª–∞ –∞–∫—Ç–∏–≤–∏—Ä—É–µ–º –¥–ª—è –ø—Ä–æ–µ–∫—Ç–∞ CI/–°D (_Settings_ -> _General_ -> _Visibility, project features, permissions_ -> _Expand_ -> –≤–∫–ª—é—á–∏—Ç—å CI/CD).
2. –í —Ä–∞–∑–¥–µ–ª–µ _Setting_ -> _CI/CD_ -> _Runners (Expand)_ –µ—Å—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è, –∫–æ—Ç–æ—Ä—É—é –Ω—É–∂–Ω–æ —É–∫–∞–∑—ã–≤–∞—Ç—å –ø—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ gitlab-runner –Ω–∏–∂–µ (token –∏ –∞–¥—Ä–µ—Å). –ï—Å–ª–∏ —É –≤–∞—Å selfhosted Gitlab –Ω–∞ –¥–æ–∫–µ—Ä–∞—Ö, —Ç–æ –∞–¥—Ä–µ—Å –º–æ–∂–µ—Ç –±—ã—Ç—å —Å HTTP, –¥–∞–∂–µ –µ—Å–ª–∏ —É –≤–∞—Å HTTPS. –ï—Å–ª–∏ –ø—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ gitlab-runner –ø–æ—è–≤–ª—è–µ—Ç—Å—è –æ—à–∏–±–∫–∞ 401, —Ç–æ –≤–∞–º –Ω—É–∂–µ–Ω HTTPS.
3. –î–µ–ª–∞–µ–º –ø–æ —Ç—É—Ç–æ—Ä–∏–∞–ª—É [Install Gitlab Runner on Windows](https://docs.gitlab.com/runner/install/windows.html), –Ω—É –ø–æ –∫—Ä–∞–π–Ω–µ–π –º–µ—Ä–µ –ø–µ—Ä–≤—ã–µ –ø—É–Ω–∫—Ç—ã —Å–æ–≤–ø–∞–¥–∞—é—Ç ). –ù–∞ –º–∞—à–∏–Ω–µ —Å–æ–∑–¥–∞–µ–º –ø–∞–ø–∫—É –±–µ–∑ –∫–∏—Ä–∏–ª–ª–∏—Ü—ã (`D:\gitlab-runner`). –ù—É–∂–µ–Ω —Ä–∞–Ω–Ω–µ—Ä –Ω–∞ –∫–∞–∂–¥—ã–π –ø—Ä–æ–µ–∫—Ç (–∏–ª–∏ –≤–∞—à –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä –º–æ–∂–µ—Ç –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –≥—Ä—É–ø–ø–æ–≤–æ–π —Ä–∞–Ω–Ω–µ—Ä).
4. –ü–æ–ª–æ–∂–∏—Ç—å —Ç—É–¥–∞ .exe, ([–≤–æ—Ç —Ñ–∞–π–ª](https://gitlab-runner-downloads.s3.amazonaws.com/latest/binaries/gitlab-runner-windows-amd64.exe)). –ü–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞—Ç—å exe –≤ `gitlab-runner.exe` (–¥–ª—è —É–¥–æ–±—Å—Ç–≤–∞, –º–æ–∂–Ω–æ –∫–∞–∫ —É–≥–æ–¥–Ω–æ –Ω–∞–∑–≤–∞—Ç—å).
5. –ï—Å–ª–∏ —É –≤–∞—Å self-signed —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç –≤ Gitlab'e, —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–π—Ç–µ –µ–≥–æ —Å —Å–∞–π—Ç–∞ –∏ –ø–æ–ª–æ–∂–∏—Ç–µ –≤ —Ä–∞–±–æ—á—É—é –ø–∞–ø–∫—É —Ä–∞–Ω–Ω–µ—Ä–æ–º (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Ñ–∞–π–ª `gitlab.blabla.ru.crt`).
6. –ó–∞–ø—É—Å—Ç–∏—Ç—å –æ—Ç –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ –∫–æ–Ω—Å–æ–ª—å (–æ–±—ã—á–Ω—É—é, –Ω–µ powershell) –∏ –ø–µ—Ä–µ–π—Ç–∏ –≤ –ø–∞–ø–∫—É —Å —Ä–∞–Ω–Ω–µ—Ä–æ–º (`d:`, `cd D:\D:\gitlab-runner`).
7. –í—ã–ø–æ–ª–Ω–∏—Ç—å –≤ –∫–æ–Ω—Å–æ–ª–∏ —Å–ª–µ–¥—É—é—â—É—é –∫–æ–º–∞–Ω–¥—É.  –í `TOKEN` –Ω–∞–¥–æ —É–∫–∞–∑–∞—Ç—å —Ç–æ–∫–µ–Ω –ø—Ä–æ–µ–∫—Ç–∞ —Å–æ —Å—Ç—Ä–∞–Ω–∏—Ü—ã _Setting_ -> _CI/CD_ -> _Runners (Expand)_, –∞ –≤ `tls-ca-file` -- **–∞–±—Å–æ–ª—é—Ç–Ω—ã–π –ø—É—Ç—å** –∫ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—É. –í `executor` –º–æ–∂–Ω–æ —É–∫–∞–∑–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –æ–±–æ–ª–æ—á–µ–∫ (https://docs.gitlab.com/runner/executors/), –º–Ω–µ –Ω—É–∂–µ–Ω —Ç–æ–ª—å–∫–æ shell:
   
   ```text
    gitlab-runner register --non-interactive --registration-token TOKEN --url https://gitlab.blabla.ru/ --tls-ca-file D:\gitlab-runner\gitlab.blabla.ru.crt --executor shell
   ```

8. –†–∞–Ω–Ω–µ—Ä –±—É–¥–µ—Ç –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω –∏ –ø–æ—è–≤–∏—Ç—Å—è –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ _Setting_ -> _CI/CD_ -> _Runners (Expand)_.
9. –û—Ç–∫—Ä—ã—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π —Ñ–∞–π–ª `config.toml` (–ø–æ—è–≤–∏—Ç—Å—è —Ä—è–¥–æ–º —Å exe —Ä–∞–Ω–Ω–µ—Ä–∞ –ø–æ—Å–ª–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏) –∏ –ø–æ–º–µ–Ω—è—Ç—å `pwsh` –≤ –∫–ª—é—á–µ `shell` –Ω–∞ `powershell` (–∏–Ω–∞—á–µ –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ –ø–∞–π–ø–ª–∞–π–Ω–∞ –±—É–¥–µ—Ç –æ—à–∏–±–∫–∞, —á—Ç–æ –ø—É—Ç—å –Ω–µ –Ω–∞–π–¥–µ–Ω).
10. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å–ª—É–∂–±—É –∫–æ–º–∞–Ω–¥–æ–π `gitlab-runner.exe install` –∏ –∑–∞–ø—É—Å—Ç–∏—Ç—å `gitlab-runner.exe start`. –ï—Å–ª–∏ –≤—ã –∏–∑–º–µ–Ω–∏—Ç–µ –∫–æ–Ω—Ñ–∏–≥ `config.toml`, —Ç–æ —Å–ª—É–∂–±—É –Ω—É–∂–Ω–æ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å.
11. –ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ _Setting_ -> _CI/CD_ -> _Runners_ —Ä–∞–Ω–Ω–µ—Ä –¥–æ–ª–∂–µ–Ω —Å—Ç–∞—Ç—å –∑–µ–ª–µ–Ω–µ–Ω—å–∫–∏–º. –ï—Å–ª–∏ –Ω–µ —Å—Ç–∞–ª, –∑–Ω–∞—á–∏—Ç —á—Ç–æ-—Ç–æ –Ω–µ —Ç–∞–∫, –∏ –¥–∂–æ–±—ã –Ω–µ –∑–∞–ø—É—Å—Ç—è—Ç—Å—è.
12. –í "–°–ª—É–∂–±–∞—Ö" –≤ Windows –ø–µ—Ä–µ–π—Ç–∏ –≤ —Å–≤–æ–π—Å—Ç–≤–∞ —Å–ª—É–∂–±—ã gitlab-runner -> _–í—Ö–æ–¥ –≤ —Å–∏—Å—Ç–µ–º—É_ > _–≥–∞–ª–∫–∞ "–†–∞–∑—Ä–µ—à–∏—Ç—å –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ —Å —Ä–∞–±–æ—á–∏–º —Å—Ç–æ–ª–æ–º"_.

–í –æ–±—â–µ–º –≤—Å–µ –≥–æ—Ç–æ–≤–æ, –∏ –º–æ–∂–Ω–æ –≤—ã–ø–æ–ª–Ω–∏—Ç—å —Ç–µ—Å—Ç–æ–≤—É—é –¥–∂–æ–±—É –∏–∑ [—Ç—É—Ç–æ—Ä–∏–∞–ª–∞](https://docs.gitlab.com/ee/ci/quick_start/). –î–ª—è —ç—Ç–æ–≥–æ –Ω—É–∂–Ω–æ —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –ø—Ä–∏–º–µ—Ä–∞ –≤ —Ñ–∞–π–ª `.gitlab-ci.yml` –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞ –∏ –∑–∞–∫–æ–º–º–∏—Ç–∏—Ç—å. –í –¥–∞–Ω–Ω–æ–º —Å–ª—É—á–∞–µ –¥–∂–æ–±–∞ –±—É–¥–µ—Ç –∑–∞–ø—É—â–µ–Ω–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏, —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ –∫–æ–º–º–∏—Ç–∞, –∏ –ø–æ—è–≤–∏—Ç—Å—è –≤ —Ä–∞–∑–¥–µ–ª–µ _CI/CD_ -> _Jobs_. –í –∫–æ–Ω—Å–æ–ª–∏ –±—É–¥—É—Ç –≤—ã–≤–µ–¥–µ–Ω—ã –∫–æ–º–∞–Ω–¥—ã `echo`.

–ß—Ç–æ –¥–µ–ª–∞–µ—Ç –¥–∂–æ–±–∞? –í—ã–∫–∞—á–∏–≤–∞–µ—Ç —Å –ø–æ–º–æ—â—å—é Git –Ω–∞—à –ø—Ä–æ–µ–∫—Ç –∏–∑ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è –∏ –ø—Ä–∏–º–µ–Ω—è–µ—Ç –ø–µ—Ä–µ—á–∏—Å–ª–µ–Ω–Ω—ã–π –≤ `.gitlab-ci.yml` –∫–æ–º–∞–Ω–¥—ã. –ê—Ä—Ç–µ—Ñ–∞–∫—Ç—ã, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ–ª—É—á–∏–ª–∏—Å—å –≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ, –ø–∞–∫—É–µ—Ç –∏ –ø–µ—Ä–µ–¥–∞–µ—Ç Gitlab'—É. –ê—Ä—Ç–µ—Ñ–∞–∫—Ç—ã –º–æ–∂–Ω–æ —Å–∫–∞—á–∞—Ç—å –≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞—Ö —Ä–∞–±–æ—Ç—ã –∏–ª–∏ —Å –≤–∫–ª–∞–¥–∫–∏ Release (–µ—Å–ª–∏ –æ–Ω–∞ –±—ã–ª–∞ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞).

–û—à–∏–±–∫–∏ —Ä–∞–Ω–Ω–µ—Ä–∞ –º–æ–∂–Ω–æ —Å–º–æ—Ç—Ä–µ—Ç—å –≤ Windows –≤ –ü—Ä–æ—Å–º–æ—Ç—Ä–µ –°–æ–±—ã—Ç–∏–π –∏–ª–∏ –≤ powershell `Get-WinEvent -ProviderName gitlab-runner`.

### –ò—Å–ø—Ä–∞–≤–ª—è–µ–º –æ—à–∏–±–∫–∏ –∏ —Ñ–∏–∫—Å–∏–º –∫–æ–Ω—Ñ–∏–≥–∏

–ö–∞–∫ –≤—ã –ø–æ–Ω–∏–º–∞–µ—Ç–µ, –µ—Å–ª–∏ –±—ã –≤—Å–µ –±—ã–ª–æ —Ç–∞–∫ –ø—Ä–æ—Å—Ç–æ, –º—ã –±—ã —Ç—É—Ç –Ω–µ —Å–æ–±–∏—Ä–∞–ª–∏—Å—å.
–ü–µ—Ä–≤–∞—è –ø—Ä–æ–±–ª–µ–º–∞, —Å –∫–æ—Ç–æ—Ä–æ–π —è —Å—Ç–æ–ª–∫–Ω—É–ª–∞—Å—å -- –∫—Ä–∞–∫–æ–∑—è–±—Ä—ã –≤ –∫–æ–Ω—Å–æ–ª–∏ –Ω–∞ GitLab. –ü–æ—Ç–æ–º –æ—Ç–∫–∞–∑—ã–≤–∞–ª—Å—è –∑–∞–ø—É—Å–∫–∞—Ç—å—Å—è —Å–∫—Ä–∏–ø—Ç. –ü–æ—Ç–æ–º —Å–∫—Ä–∏–ø—Ç –Ω–µ –º–æ–≥ –Ω–∞–π—Ç–∏ –Ω—É–∂–Ω—ã–µ –ø—É—Ç–∏. –ö–æ—Ä–æ—á–µ, –±–µ–∑ –¥–æ–ª–≥–∏—Ö –ø—Ä–µ–ª—é–¥–∏–π –ø–µ—Ä–µ—Ö–æ–∂—É —Å—Ä–∞–∑—É –∫ —Å–ø–∏—Å–∫—É —Ñ–∏–∫—Å–æ–≤ –≤–æ–∑–º–æ–∂–Ω—ã—Ö –ø—Ä–æ–±–ª–µ–º.

#### –ö—Ä–∞–∫–æ–∑—è–±—Ä—ã –≤ –∫–æ–Ω—Å–æ–ª–∏ –Ω–∞ GitLab

–ß—Ç–æ–±—ã gitlab-runner –Ω–µ –ø–∏—Å–∞–ª –∫—Ä–∞–∫–æ–∑—è–±—Ä—ã –≤ —Å–∫—Ä–∏–ø—Ç `.gitlab-ci.yml` –≤ –∫–æ–Ω—Ñ–∏–≥ —Ä–∞–±–æ—Ç—ã –Ω—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å `CHCP 65001`:

```yaml
build-job:
  before_script:
   - CHCP 65001
  stage: build
  script:
```

–≠—Ç–æ –µ—â–µ –Ω–µ –≤—Å–µ. –ù–∞ –º–∞—à–∏–Ω–µ, –Ω–∞ –∫–æ—Ç–æ—Ä–æ–π —Å—Ç–æ–∏—Ç gitlab-runner –Ω—É–∂–Ω–æ –ø–µ—Ä–µ–∫–ª—é—á–∏—Ç—å —Ä–µ–≥–∏–æ–Ω–∞–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –Ω–∞ _–ê–Ω–≥–ª–∏–π—Å–∫–∏–π (–°–®–ê)_: _–†–µ–≥–∏–æ–Ω–∞–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã_ -> _–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã ... _ -> _–†–µ–≥–∏–æ–Ω–∞–ª—å–Ω—ã–µ —Å—Ç–∞–Ω–¥–∞—Ä—Ç—ã - –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Ñ–æ—Ä–º–∞—Ç–æ–≤ –¥–∞—Ç—ã, –≤—Ä–µ–º–µ–Ω–∏ –∏ —á–∏—Å–µ–ª _ -> _–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ_ -> _–ò–∑–º–µ–Ω–∏—Ç—å —è–∑—ã–∫ —Å–∏—Å—Ç–µ–º—ã_ -> –≤—ã–±—Ä–∞—Ç—å –ê–Ω–≥–ª–∏–π—Å–∫–∏–π (–°–®–ê).

–≠—Ç–æ —Ç–æ–∂–µ –µ—â–µ –Ω–µ –≤—Å–µ, —Ç–∞–∫ –∫–∞–∫ –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ —Å–∫—Ä–∏–ø—Ç–æ–≤ `build.ps1` –∏ `update_docx_props.ps1` –º–æ–≥—É—Ç –≤–æ–∑–Ω–∏–∫–Ω—É—Ç—å –ø—Ä–æ–±–ª–µ–º—ã —Å –∫–æ–¥–∏—Ä–æ–≤–∫–æ–π. –≠—Ç–∏ —Å–∫—Ä–∏–ø—Ç—ã –Ω—É–∂–Ω–æ –æ—Ç–∫—Ä—ã—Ç—å –≤ –±–ª–æ–∫–Ω–æ—Ç–µ Notepad++ –∏ –ø–µ—Ä–µ—Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤ –∫–æ–¥–∏—Ä–æ–≤–∫—É `UTF-8 BOM`. –í –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–æ–Ω–Ω–æ–º —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ –≤—Å–µ —É–∂–µ –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –∫–æ–¥–∏—Ä–æ–≤–∫–µ.

##### –ï—Å–ª–∏ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —Ä–µ–≥–∏–æ–Ω–∞ - –Ω–µ –≤–∞—Ä–∏–∞–Ω—Ç

–í–∞—Ä–∏–∞–Ω—Ç —Å —Ä–µ–≥–∏–æ–Ω–∞–ª—å–Ω—ã–º–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏ –Ω–µ —É–¥–æ–±–µ–Ω, –µ—Å–ª–∏ –Ω—É–∂–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å —Å non-unicode –ø—Ä–æ–≥—Ä–∞–º–º–∞–º–∏, –Ω–∞–ø—Ä–∏–º–µ—Ä, –º–∞–∫—Ä–æ—Å–∞–º–∏ Microsoft Word –≤ VBA. –í —ç—Ç–æ–º —Å–ª—É—á–∞–µ, –º–∞–∫—Ä–æ—Å—ã –ø–æ–∏—Å–∫–∞ –∫–∏—Ä–∏–ª–ª–∏—Ü—ã —Ä–∞–±–æ—Ç–∞—Ç—å –Ω–µ –±—É–¥—É—Ç. –ú–æ–∂–Ω–æ –∫–æ–Ω–µ—á–Ω–æ –ø–µ—Ä–µ–≤–æ–¥–∏—Ç—å –∫–∞–∂–¥—ã–π —Å–∏–º–≤–æ–ª `ChrW`, –Ω–æ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –µ—â–µ —Ö—É–∂–µ. –°–¥–µ–ª–∞—Ç—å –º–æ–∂–Ω–æ —Ç–∞–∫:

1. –ü–µ—Ä–µ–∫–ª—é—á–∞–µ–º —Ä–µ–≥–∏–æ–Ω–∞–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –æ–±—Ä–∞—Ç–Ω–æ –Ω–∞ –†—É—Å—Å–∫–∏–π (–†–æ—Å—Å–∏—è).
2. –ü—Ä–æ–≤–µ—Ä—è–µ–º, –µ—Å—Ç—å –ª–∏ —É –Ω–∞—Å –ø—Ä–æ—Ñ–∏–ª—å –¥–ª—è –∫–æ–Ω—Å–æ–ª–∏ PowerShell. –ï—Å–ª–∏ –ø—Ä–æ—Ñ–∏–ª—è –Ω–µ—Ç, —Ç–æ —Å–æ–∑–¥–∞–µ–º –µ–≥–æ:
 
   ```powershell
   $profile
   test-path $profile
   new-item -path $profile -itemtype file -force
   ```

3. –î–æ–±–∞–≤–ª—è–µ–º –≤ —Ñ–∞–π–ª —Å—Ç—Ä–æ–∫—É `$OutputEncoding = [console]::InputEncoding = [console]::OutputEncoding = New-Object System.Text.UTF8Encoding` ([source](https://stackoverflow.com/questions/57131654/using-utf-8-encoding-chcp-65001-in-command-prompt-windows-powershell-window))
4. –ò–ª–∏ —Ç–æ –∂–µ —Å–∞–º–æ–µ –ø—Ä–æ–≥—Ä–∞–º–º–Ω–æ, —á–µ—Ä–µ–∑ –∫–æ–Ω—Å–æ–ª—å: 

```powershell
'$OutputEncoding = [console]::InputEncoding = [console]::OutputEncoding = New-Object System.Text.UTF8Encoding' + [Environment]::Newline + (Get-Content -Raw $PROFILE -ErrorAction SilentlyContinue) | Set-Content -Encoding utf8 $PROFILE
```

–ì–æ—Ç–æ–≤–æ! –†–∞–±–æ—Ç–∞–µ—Ç —ç—Ç–æ –Ω–µ —Ç–∞–∫ –∫—Ä–∞—Å–∏–≤–æ, –∫–∞–∫ —Å –Ω–∞—Å—Ç—Ä–æ–π–∫–æ–π —Ä–µ–≥–∏–æ–Ω–∞, –Ω–æ —Ö–æ—Ç—è –±—ã —Ç–µ–ø–µ—Ä—å –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –º–∞–∫—Ä–æ—Å—ã –∏ –∫—Ä–∞–∫–æ–∑—è–±—Ä –≤ –∫–æ–Ω—Å–æ–ª–∏ –ø–æ–º–µ–Ω—å—à–µ.

#### Git, –ø—É—Ç–∏ –∏ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏

–ï—Å–ª–∏ –≤—ã, –∫–∞–∫ —è, –¥–æ —ç—Ç–æ–≥–æ –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –∏–º–µ–ª–∏ –¥–µ–ª–∞ —Å –Ω–∞—Å—Ç—Ä–æ–π–∫–æ–π CI/CD (–∫—Ä–æ–º–µ –∫–∞–∫ GitHub, –∫–æ—Ç–æ—Ä—ã–π –≤—Å–µ —Å–∞–º –¥–µ–ª–∞–µ—Ç), —Ç–æ –º–æ–∂–Ω–æ –∑–∞–≤–∏—Å–Ω—É—Ç—å –Ω–∞ –æ—á–µ–Ω—å –ø—Ä–æ—Å—Ç—ã—Ö –æ—à–∏–±–∫–∞—Ö.

–ò–Ω–æ–≥–¥–∞, –ø—Ä–∏ —Å–∫–∞—á–∏–≤–∞–Ω–∏–∏ —Å Git —Ä–∞–±–æ—Ç–∞ –º–æ–∂–µ—Ç —É–ø–∞—Å—Ç—å —Å –æ—à–∏–±–∫–æ–π –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ (**Authentication error**). –≠—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —Ä–∞–Ω–¥–æ–º–Ω–æ —É —Ä–∞–∑–Ω—ã—Ö –ª—é–¥–µ–π. –ß—Ç–æ–±—ã –∏—Å–ø—Ä–∞–≤–∏—Ç—å –æ—à–∏–±–∫—É, –Ω—É–∂–Ω–æ –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π —Ñ–∞–π–ª gitlab-runner `config.toml` –ø–æ–¥ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–º `url` –¥–æ–±–∞–≤–∏—Ç—å –µ—â–µ –æ–¥–Ω—É —Å—Ç—Ä–æ–∫—É —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–º `clone_url`. URL —É–∫–∞–∑–∞—Ç—å —Ç–æ—á–Ω–æ —Ç–∞–∫–æ–π –∂–µ –∫–∞–∫ –≤ `url`. –ú–∞–≥–∏—è, —á—Ç–æ —Å–∫–∞–∑–∞—Ç—å.

–ß—Ç–æ–±—ã –∑–∞–ø—É—Å–∫–∞—Ç—å –Ω–∞—à–∏ —Å–∫—Ä–∏–ø—Ç—ã, –Ω–∞–º –ø–æ–ª–µ–∑–Ω–æ –±—É–¥–µ—Ç –∏–º–µ—Ç—å —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏. –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é gitlab-runner —Å–∫–∞—á–∏–≤–∞–µ—Ç —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –≤ –ø–∞–ø–∫—É —Å –Ω–∞–∑–≤–∞–Ω–∏–µ–º –∏–∑ —Ä–∞–Ω–¥–æ–º–Ω–æ–≥–æ –Ω–∞–±–æ—Ä–∞ –±—É–∫–≤ –∏ —Ü–∏—Ñ—Ä (–Ω–∞–ø—Ä–∏–º–µ—Ä, `build/123hjksd898231`).
–í –∫–æ–Ω—Ñ–∏–≥  `config.toml` –≤ —Ä–∞–∑–¥–µ–ª `[runners.custom_build_dir]` –¥–æ–±–∞–≤–∏—Ç—å —Å—Ç—Ä–æ—á–∫—É `enabled = true`.

–í–æ—Ç –∫–∞–∫ –ø—Ä–∏–º–µ—Ä–Ω–æ –≤—ã–≥–ª—è–¥–∏—Ç –∫–æ–Ω—Ñ–∏–≥ –ø–æ—Å–ª–µ –≤—Å–µ—Ö —Ñ–∏–∫—Å–æ–≤:

```conf
concurrent = 1
check_interval = 0
shutdown_timeout = 0

[session_server]
  session_timeout = 1800

[[runners]]
  name = "docbuilder"
  url = "https://gitlab.blabla.ru/"
  clone_url = "https://gitlab.blabla.ru/"
  id = 6
  token = "SOMETOKEN"
  token_obtained_at = 2023-02-16T11:50:04Z
  token_expires_at = 0001-01-01T00:00:00Z
  tls-ca-file = "D:\\gitlab-runner\\gitlab.blabla.ru.crt"
  executor = "shell"
  shell = "powershell"
  [runners.custom_build_dir]
    enabled = true
  [runners.cache]
    MaxUploadedArchiveSize = 0
    [runners.cache.s3]
    [runners.cache.gcs]
    [runners.cache.azure]
```

–≠—Ç–∞ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–æ–∑–≤–æ–ª–∏—Ç –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ `.gitlab-ci.yml` –∑–∞–¥–∞–≤–∞—Ç—å –ø—É—Ç—å, –∫—É–¥–∞ –±—É–¥–µ—Ç —Å–∫–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω –ø—Ä–æ–µ–∫—Ç:

```yaml
variables:
  GIT_CLONE_PATH: $CI_BUILDS_DIR/$CI_PROJECT_NAME
```

–ö–æ–¥ –±—É–¥–µ—Ç —Å–∫–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω –≤ –ø–∞–ø–∫—É `/build/[–Ω–∞–∑–≤–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞ —Å Gitlab]`. –ú–æ–∂–Ω–æ —Ç–∞–∫–∂–µ —É–∫–∞–∑–∞—Ç—å –≤–º–µ—Å—Ç–æ `$CI_PROJECT_NAME` –ª—é–±–æ–µ –∏–º—è.

–ö–æ–≥–¥–∞ –±—É–¥–µ—Ç–µ —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å —à–∞–≥–∏ –ø–æ —Å–±–æ—Ä–∫–µ gostdown'–æ–º –æ—á–µ–Ω—å —Ä–µ–∫–æ–º–µ–Ω–¥—É—é –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–æ–º–∞–Ω–¥—ã –ø–µ—Ä–µ—Ö–æ–¥–∞ –ø–æ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è–º –ø–µ—Ä–µ–¥ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ–º —Å–∫—Ä–∏–ø—Ç–æ–≤. 
–°–∫—Ä–∏–ø—Ç—ã –Ω–µ –±—É–¥—É—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—Å—è, –µ—Å–ª–∏ –∏—Ö –ø—É—Ç—å –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π (`./$CI_BUILDS_DIR/test/build.ps1` –±—É–¥–µ—Ç —Ä—É–≥–∞—Ç—å—Å—è –Ω–∞ `You must provide a value expression following the '/' operator.`, `Unexpected token`, `Missing closing '}' in statement block or type definition` –∏ –≤—Å–µ –ø–æ–¥—Ä—è–¥). 

–ö—Ä–æ–º–µ —Ç–æ–≥–æ, —Å–∫—Ä–∏–ø—Ç `build.ps1` –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –∑–∞–ø—É—Å–∫–∞—Ç—å –∏–∑ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞, –∫–æ—Ç–æ—Ä—ã–π –≤—ã —Å–æ–±–∏—Ä–∞–µ—Ç–µ. –í –ø—Ä–æ—Ç–∏–≤–Ω–æ–º —Å–ª—É—á–∞–µ, pandoc —Å–Ω–∞—á–∞–ª–∞ –Ω–µ –Ω–∞–π–¥–µ—Ç —Ñ–∞–π–ª–æ–≤, –ø–æ—Ç–æ–º –Ω–µ –Ω–∞–π–¥–µ—Ç include, –ø–æ—Ç–æ–º –≤–æ–æ–±—â–µ –æ–±–∏–¥–∏—Ç—Å—è –∏ —É–ø–∞–¥–µ—Ç —Å –æ—à–∏–±–∫–æ–π. –¢–∞–∫ —á—Ç–æ –µ—Å–ª–∏ —á—Ç–æ-—Ç–æ –Ω–µ —Å–æ–±–∏—Ä–∞–µ—Ç—Å—è, –∏ –≤–æ–∑–Ω–∏–∫–∞—é—Ç –Ω–µ–ø–æ–Ω—è—Ç–Ω—ã–µ –æ—à–∏–±–∫–∏, —Å–Ω–∞—á–∞–ª–∞ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –≤—Å–µ –ø—É—Ç–∏!

#### –ü—Ä–∞–≤–∞, —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è –∏ –¥–æ—Å—Ç—É–ø –∫ COMObject

–ï—Å–ª–∏ –≤—ã —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –∏ —É—Å–ø–µ—à–Ω–æ–≥–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –¥–∂–æ–±—ã –∏–∑ —Ç—É—Ç–æ—Ä–∏–∞–ª–∞ –ø–æ–ø—Ä–æ–±—É–µ—Ç–µ –∑–∞–ø—É—Å—Ç–∏—Ç—å —Å–∫—Ä–∏–ø—Ç Gostdown, —Ç–æ –Ω–∏—á–µ–≥–æ —É –≤–∞—Å –Ω–µ –≤—ã–π–¥–µ—Ç. –°–∫—Ä–∏–ø—Ç —Å–≤–∞–ª–∏—Ç—Å—è –≤–æ—Ç –Ω–∞ —ç—Ç–æ–π —Å—Ç—Ä–æ—á–∫–µ: `$word = New-Object -ComObject Word.Application`.

–ù–µ—Ç, —É –º–µ–Ω—è —Å–Ω–∞—á–∞–ª–∞ –≤—Å–µ –ø–æ–ª—É—á–∏–ª–æ—Å—å, –ø–æ—Ç–æ–º—É —á—Ç–æ —è –∑–∞–ø—É—Å–∫–∞–ª–∞ –≤—Å–µ –Ω–∞ —Å–≤–æ–µ–º –Ω–æ—É—Ç–±—É–∫–µ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è. 
–ù–æ –ø—Ä–∏ –ø–µ—Ä–µ–Ω–æ—Å–µ –ø–∞–π–ø–ª–∞–π–Ω–∞ –Ω–∞ –æ—Ç–¥–µ–ª—å–Ω—ã–π —Å–µ—Ä–≤–µ—Ä –≤—ã–ª–µ–∑–ª–∏ –æ—à–∏–±–∫–∏, —Å–≤—è–∑–∞–Ω–Ω—ã–µ —Å –ø—Ä–∞–≤–∞–º–∏ –∑–∞–ø—É—Å–∫–∞ —Å–ª—É–∂–±—ã –∏ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è–º–∏ COMObject. 

–¢–∞–∫–∞—è –≥–æ—Ä–µ–º—ã–∫–∞ –±—ã–ª–∞ –Ω–µ —è –æ–¥–Ω–∞, –ø—Ä–æ —ç—Ç–æ –µ—Å—Ç—å —Ç—Ä–µ–¥ –Ω–∞ [stackoverflow](https://stackoverflow.com/questions/74277833/powershell-script-doesnt-work-with-docx-files-as-com-objects-while-being-run-vi). 
–í –æ–¥–∏–Ω–æ–∫–æ–º –æ—Ç–≤–µ—Ç–µ –∫ —ç—Ç–æ–π –ø—Ä–æ–±–ª–µ–º–µ —Å–æ–¥–µ—Ä–∂–∏—Ç—Å—è —Å–ø–æ—Å–æ–± —Ä–µ—à–µ–Ω–∏—è (–∑–∞–≤–µ–ª–∞ –¥–ª—è —ç—Ç–æ–≥–æ –∞–∫–∫–∞—É–Ω—Ç –Ω–∞ stackoverflow :).

1. –í "–°–ª—É–∂–±–∞—Ö" –Ω–∞–π—Ç–∏ gitlab-runner -> _–°–≤–æ–π—Å—Ç–≤–∞_ –Ω–∞ –≤–∫–ª–∞–¥–∫–µ _–í—Ö–æ–¥ –≤ —Å–∏—Å—Ç–µ–º—É_ –ø–æ—Å—Ç–∞–≤–∏—Ç—å –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å –≤ _–° —É—á–µ—Ç–Ω–æ–π –∑–∞–ø–∏—Å—å—é_ –∏ —É–∫–∞–∑–∞—Ç—å –∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏ –ø–∞—Ä–æ–ª—å (—è —É–∫–∞–∑–∞–ª–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω—ã–º–∏ –ø—Ä–∞–≤–∞–º–∏, –ø–æ–¥ –∫–æ—Ç–æ—Ä—ã–º —Å—Ç–∞–≤–∏–ª–∞ pandoc, word –∏ –≤—Å–µ –æ—Å—Ç–∞–ª—å–Ω–æ–µ).
2. –í—ã–±–µ—Ä–∏—Ç–µ _–ü—É—Å–∫_ -> _–í—ã–ø–æ–ª–Ω–∏—Ç—å_ (–∏–ª–∏ –Ω–∞–∂–º–∏—Ç–µ Win + R) -> –≤–≤–µ–¥–∏—Ç–µ `MMC -32` –∏ –Ω–∞–∂–º–∏—Ç–µ –û–ö.
3. –í—ã–±–µ—Ä–∏—Ç–µ _–§–∞–π–ª_ -> _–î–æ–±–∞–≤–∏—Ç—å/—É–¥–∞–ª–∏—Ç—å –æ—Å–Ω–∞—Å—Ç–∫—É_ ->_ –¥–æ–±–∞–≤—å—Ç–µ –°–ª—É–∂–±—ã –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤_. –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ –∫–æ–Ω—Å–æ–ª—å.
4. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—É—é –∫–æ–Ω—Å–æ–ª—å —Å –ø—Ä–∞–≤–∞–º–∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞.
5. –†–∞—Å–∫—Ä–æ–π—Ç–µ –¥–µ—Ä–µ–≤–æ _–°–ª—É–∂–±—ã –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤_ –¥–æ _–ú–æ–π –∫–æ–º–ø—å—é—Ç–µ—Ä_ –∏ –≤—ã–±–µ—Ä–∏—Ç–µ _–ù–∞—Å—Ç—Ä–æ–π–∫–∞ DCOM_.
6. –ù–∞–π–¥–∏—Ç–µ `Microsoft Word 97 - 2003 Document` -> –ü–ö–ú -> _–°–≤–æ–π—Å—Ç–≤–∞.
7. –ù–∞ –≤–∫–ª–∞–¥–∫–µ _–£–¥–æ—Å—Ç–æ–≤–µ—Ä–µ–Ω–∏–µ_ –≤—ã–±–µ—Ä–∏—Ç–µ _–£–∫–∞–∑–∞–Ω–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å_ –∏ —É–∫–∞–∂–∏—Ç–µ —É—á–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (—Ç–∞–∫–æ–π –∂–µ –∫–∞–∫ –Ω–∞ —à–∞–≥–µ 1).
8. –ù–∞ –≤–∫–ª–∞–¥–∫–µ _–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å_ > _–†–∞–∑—Ä–µ—à–µ–Ω–∏—è –Ω–∞ –¥–æ—Å—Ç—É–ø_ –≤—ã–±—Ä–∞—Ç—å _–ù–∞—Å—Ç—Ä–æ–∏—Ç—å_ –∏ –¥–æ–±–∞–≤–∏—Ç—å —è–≤–Ω–æ —Å–≤–æ–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏ –≤—ã–¥–∞—Ç—å –µ–º—É –≤—Å–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è. –¢–∞–∫–∂–µ —É –º–µ–Ω—è –≤—ã–¥–∞–Ω—ã —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è –≤ —Ä–∞–∑–¥–µ–ª–µ _–†–∞–∑—Ä–µ—à–µ–Ω–∏—è –Ω–∞ –Ω–∞—Å—Ç—Ä–æ–π–∫—É_. –≠—Ç–æ —Ä–∏—Å–∫ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏, —Ç–∞–∫ —á—Ç–æ –≤—ã–ø–æ–ª–Ω—è–π—Ç–µ —Ç–∞–∫—É—é –Ω–∞—Å—Ç—Ä–æ–π–∫—É —Ç–æ–ª—å–∫–æ –≤ –¥–æ–≤–µ—Ä–µ–Ω–Ω–æ–π —Å–µ—Ç–∏.

–í–æ—Ç, —Ç–µ–ø–µ—Ä—å –¥–æ–ª–∂–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å. –ò–º–µ–π—Ç–µ –≤ –≤–∏–¥—É, —á—Ç–æ —Ç–µ–ø–µ—Ä—å —Ä–∞–±–æ—Ç–∞ –Ω–µ –±—É–¥–µ—Ç –∑–∞–ø—É—Å–∫–∞—Ç—å—Å—è, –µ—Å–ª–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π –≤—Ö–æ–¥ –ø–æ–¥ —Ç–µ–º –∂–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º (—Ç–æ –µ—Å—Ç—å –≤—ã –∑–∞–ª–æ–≥–∏–Ω–µ–Ω—ã, –Ω–∞–ø—Ä–∏–º–µ—Ä, –ø–æ —É–¥–∞–ª–µ–Ω–Ω–æ–º—É —Ä–∞–±–æ—á–µ–º—É —Å—Ç–æ–ª—É). –î–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –º–æ–∂–Ω–æ –ø–µ—Ä–µ–∫–ª—é—á–∏—Ç—å –≤ –ø—É–Ω–∫—Ç–µ 7 —É–¥–æ—Å—Ç–æ–≤–µ—Ä–µ–Ω–∏–µ –Ω–∞ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, —Ç–æ–≥–¥–∞ —Å–ª—É–∂–±–∞ –±—É–¥–µ—Ç –∑–∞–ø—É—Å–∫–∞—Ç—å—Å—è —Å –ø—Ä–∞–≤–∞–º–∏ –∑–∞–ª–æ–≥–∏–Ω–µ–Ω–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.

–ï—â–µ –Ω–µ—Å–∫–æ–ª—å–∫–æ –º–æ–º–µ–Ω—Ç–æ–≤:

1. –ï—Å–ª–∏ —Ä–∞–±–æ—Ç–∞ –∑–∞–≤–∏—Å–ª–∞ –Ω–∞ —ç—Ç–∞–ø–µ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å Word, —Ç–æ –≤—Å–µ –¥–∞–ª—å–Ω–µ–π—à–∏–µ –∑–∞–ø—É—Å–∫–∏ –∏ —Ä–∞–±–æ—Ç—ã –∑–∞–≤–µ—Ä—à–∞—Ç—å—Å—è –æ—à–∏–±–∫–æ–π, —Ç–∞–∫ –∫–∞–∫ –ø—Ä–æ—Ü–µ—Å—Å Word –±—É–¥–µ—Ç –ø—Ä–æ–¥–æ–ª–∂–∞—Ç—å –≤–∏—Å–µ—Ç—å. –ß—Ç–æ–±—ã —ç—Ç–æ–≥–æ –Ω–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏–ª–æ, –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–ª—è—Ç—å –≤ –∫–æ–Ω—Ñ–∏–≥ —Ä–∞–±–æ—Ç—ã –∫–æ–º–∞–Ω–¥—É `Stop-Process -Name "WINWORD"` –ø–µ—Ä–µ–¥ –∏–ª–∏ –ø–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Å–∫—Ä–∏–ø—Ç–∞ (–ª—É—á—à–µ –¥–æ).
2. –ï—Å–ª–∏ —Ä–∞–±–æ—Ç–∞ –∑–∞–≤–µ—Ä—à–∏–ª–∞—Å—å –æ—à–∏–±–∫–æ–π, –Ω–∞ —ç—Ç–∞–ø–µ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å `template.docx`, —Ç–æ —Å–ª–µ–¥—É—é—â–µ–µ –æ—Ç–∫—Ä—ã—Ç–∏–µ Word –º–æ–∂–µ—Ç –ø–æ–≤–∏—Å–Ω—É—Ç—å —Å –¥–∏–∞–ª–æ–≥–æ–≤—ã–º –æ–∫–Ω–æ–º, –∫–æ—Ç–æ—Ä–æ–µ –Ω—É–∂–Ω–æ –∑–∞–∫—Ä—ã—Ç—å –≤—Ä—É—á–Ω—É—é. –ö–∞–∫ —ç—Ç–æ –æ–±–æ–π—Ç–∏, —è –ø–æ–∫–∞ –Ω–µ –ø–æ–Ω—è–ª–∞, –Ω–æ –±–æ–ª—å—à–µ —Ä–∞–±–æ—Ç—ã —É –º–µ–Ω—è –Ω–µ –∑–∞–≤–∏—Å–∞–ª–∏, —Ç–∞–∫ —á—Ç–æ —ç—Ç–æ —Ä–µ–¥–∫–∞—è –æ—à–∏–±–∫–∞.

### –ü—Ä–∏–º–µ—Ä –∫–æ–Ω—Ñ–∏–≥–∞

–¢–∞–∫ –∫–∞–∫ –≤ –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–æ–Ω–Ω–æ–º –ø—Ä–æ–µ–∫—Ç–µ –Ω–∞ GitHub –ø–æ–∫–∞–∑–∞—Ç—å —Å–±–æ—Ä–∫—É –∑–∞—Ç—Ä—É–¥–Ω–∏—Ç–µ–ª—å–Ω–æ, —è –ø–æ–∫–∞–∂—É —Ä–∞–±–æ—á–∏–π –∫–æ–Ω—Ñ–∏–≥ —Ä–∞–±–æ—Ç—ã –∏ –≤—ã–≤–æ–¥ –∫–æ–Ω—Å–æ–ª–∏.

–ù–∏–∂–µ –∫–æ–Ω—Ñ–∏–≥ `.gitlab-ci.yml` –¥–ª—è —Å–±–æ—Ä–∫–∏ –æ–¥–Ω–æ–≥–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞ (–≤ –¥–∞–Ω–Ω–æ–º —Å–ª—É—á–∞–µ - –ø—Ä–æ–≥—Ä–∞–º–º–∞ –∏ –º–µ—Ç–æ–¥–∏–∫–∞ –∏—Å–ø—ã—Ç–∞–Ω–∏–π, –µ—ë —á–∞—â–µ –≤—Å–µ–≥–æ —Ç—Ä–µ–±—É–µ—Ç—Å—è —Å–æ–±–∏—Ä–∞—Ç—å). –†–∞–±–æ—Ç–∞ —Å–æ–±–∏—Ä–∞–µ—Ç –¥–æ–∫—É–º–µ–Ω—Ç, –æ–±–Ω–æ–≤–ª—è–µ—Ç –ø–æ–ª—è –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã —Ä–∞–±–æ—Ç—ã –≤ Gitlab.

Keyword `workflow` –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è –ø–µ—Ä–µ–¥ —Ä–∞–±–æ—Ç–∞–º–∏ –∏ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç, –±—É–¥–µ—Ç –ª–∏ –≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è –ø–∞–π–ø–ª–∞–π–Ω –∏ –ø—Ä–∏ –∫–∞–∫–∏—Ö —É—Å–ª–æ–≤–∏—è—Ö (—Å–º. [–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é](https://docs.gitlab.cn/14.0/ee/ci/yaml/README.html#workflow)). –í –¥–∞–Ω–Ω–æ–º —Å–ª—É—á–∞–µ, –ø–∞–π–ø–ª–∞–π–Ω –±—É–¥–µ—Ç —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω —Ç–æ–ª—å–∫–æ, –µ—Å–ª–∏ –≤ commit message —Å–æ–¥–µ—Ä–∂–∏—Ç—Å—è –∫–ª—é—á–µ–≤–æ–π —Ñ–ª–∞–≥ `-build`.

```yaml
variables:
  GIT_CLONE_PATH: $CI_BUILDS_DIR/$CI_PROJECT_NAME

workflow:
  rules:
    - if: $CI_COMMIT_MESSAGE =~ /-build$/

Build PMI:
  before_script:
    - CHCP 65001
  stage: build
  when: manual
  script:
    - echo "Starting building PMI..."
    - mkdir build
    - echo "Reading include file..."
    - get-content $CI_BUILDS_DIR/$CI_PROJECT_NAME/docs_gost/pmi/docx_include.txt | foreach {"builds/$CI_PROJECT_NAME/docs_gost/pmi/" + $_} | out-file $CI_BUILDS_DIR/$CI_PROJECT_NAME/docs_gost/pmi/include.txt
    - echo "Building..."
    - cd $CI_BUILDS_DIR/$CI_PROJECT_NAME/docs_gost/pmi
    - ./../../scripts/build.ps1 -md $(Get-Content $CI_BUILDS_DIR/$CI_PROJECT_NAME/docs_gost/pmi/include.txt) -template $CI_BUILDS_DIR/$CI_PROJECT_NAME/docs_gost/template.docx -luafilter $CI_BUILDS_DIR/$CI_PROJECT_NAME/scripts/ -docx $CI_BUILDS_DIR/$CI_PROJECT_NAME/build/pmi.docx -embedfonts
    - sleep 5
    - echo "Updating fields..."
    - cd $CI_BUILDS_DIR/$CI_PROJECT_NAME
    - ./scripts/update_docx_props.ps1 -dir $CI_BUILDS_DIR/$CI_PROJECT_NAME/build -conf $CI_BUILDS_DIR/$CI_PROJECT_NAME/scripts/configs/pmi.xml -filename pmi.docx
    - sleep 5
  artifacts:
    paths:
      - build/pmi.docx
    expire_in: 1 hour
```

–ü–∞—Ä–∞–º–µ—Ç—Ä `expire_in` —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –≤—Ä–µ–º—è —Ö—Ä–∞–Ω–µ–Ω–∏—è —Å–æ–±—Ä–∞–Ω–Ω–æ–≥–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞ –Ω–∞ Gitlab. –ü–æ –∏—Å—Ç–µ—á–µ–Ω–∏–µ —ç—Ç–æ–≥–æ —Å—Ä–æ–∫–∞, –∞—Ä—Ç–µ—Ñ–∞–∫—Ç —É–¥–∞–ª—è–µ—Ç—Å—è. –û–¥–Ω–∞–∫–æ, –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é GitLab –≤ –≤–µ—Ä—Å–∏–∏, –Ω–∞—á–∏–Ω–∞—è —Å 13, –≤—Å–µ–≥–¥–∞ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –ø–æ—Å–ª–µ–¥–Ω–∏–π –∞—Ä—Ç–µ—Ñ–∞–∫—Ç (—ç—Ç–æ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞ –≤ —Å–µ–∫—Ü–∏–∏ CI/CD).

–ï—Å–ª–∏ –Ω—É–∂–Ω–æ, —á—Ç–æ–±—ã —Ä–∞–±–æ—Ç–∞ –∑–∞–ø—É—Å–∫–∞–ª–∞—Å—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ç–æ–ª—å–∫–æ –¥–ª—è –º–∞—Å—Ç–µ—Ä–∞, –∞ –¥–ª—è –≤—Å–µ—Ö –æ—Å—Ç–∞–ª—å–Ω—ã—Ö –≤–µ—Ç–æ–∫ -- —Ç–æ–ª—å–∫–æ –≤—Ä—É—á–Ω—É—é, —Ç–æ –≤ —Ä–∞–±–æ—Ç—É (–∏–ª–∏ –≤ `workflow`) –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –ø—Ä–∞–≤–∏–ª–æ ([–ø—Ä–∏–º–µ—Ä](https://gitlab.com/brendan-demo/default-or-manual-deploy)):

```yaml
rules:
    - if: $CI_COMMIT_BRANCH == $CI_DEFAULT_BRANCH
      when: always
    - if: $CI_COMMIT_BRANCH != $CI_DEFAULT_BRANCH
      when: manual
```

–¢–∞–∫–∂–µ –º–æ–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å, —á—Ç–æ–±—ã –ø–∞–π–ø–ª–∞–π–Ω –∏ —Ä–∞–±–æ—Ç–∞ —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–ª–∏—Å—å —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ –≤ –∫–æ–º–º–∏—Ç–µ –∫–ª—é—á–µ–≤–æ–≥–æ —Å–ª–æ–≤–∞. –ù–∞–ø—Ä–∏–º–µ—Ä, —É –º–µ–Ω—è –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ —Ç–∞–∫, —á—Ç–æ –ø–∞–π–ø–ª–∞–π–Ω —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –∫–æ–º–º–∏—Ç–µ —Å –∫–ª—é—á–µ–≤—ã–º —Å–ª–æ–≤–æ–º `[build]`, —Ä–∞–±–æ—Ç—É –º–æ–∂–Ω–æ –∑–∞–ø—É—Å—Ç–∏—Ç—å –≤—Ä—É—á–Ω—É—é. –ê –µ—Å–ª–∏ –Ω—É–∂–Ω–æ —Å–æ–±—Ä–∞—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –¥–æ–∫—É–º–µ–Ω—Ç), —Ç–æ –≤ –∫–æ–º–º–∏—Ç–µ —Ç–∞–∫–∂–µ –ø–µ—Ä–µ–¥–∞–µ–º —Ñ–ª–∞–≥ —Å –¥–æ–∫—É–º–µ–Ω—Ç–æ–º:

```yaml
workflow:
  rules:
    - if: $CI_COMMIT_MESSAGE =~ /\[build\]/

Build PMI:
  before_script:
    - CHCP 65001
  stage: build
  rules:
    - if: $CI_COMMIT_MESSAGE =~ /\[pmi\]/
      when: always
    - if: $CI_COMMIT_MESSAGE !~ /\[pmi\]/
      when: manual
```

–í —à–∞–≥–µ —Å–∫—Ä–∏–ø—Ç–∞ `Reading include file...` –≤—ã—à–µ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –æ–ø–µ—Ä–∞—Ü–∏—è –ø–æ –∏–∑–º–µ–Ω–µ–Ω–∏—é –ø—É—Ç–µ–π –≤ —Ñ–∞–π–ª–µ `docx_include.txt`. –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –≤ —ç—Ç–æ–º —Ñ–∞–π–ª–µ —Ö—Ä–∞–Ω–∏—Ç—Å—è —Å–ø–∏—Å–æ–∫ .md, –∫–æ—Ç–æ—Ä—ã–µ –º—ã —Ö–æ—Ç–∏–º –≤–∫–ª—é—á–∏—Ç—å –≤ —Ä–µ–∑—É–ª—å—Ç–∏—Ä—É—é—â–∏–π .docx. –û–¥–Ω–∞–∫–æ –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ gitlab-runner –ø—É—Ç–∏ –≤ —ç—Ç–æ–º —Ñ–∞–π–ª–µ –Ω—É–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å –Ω–∞ –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã–µ –ø—É—Ç–∏ –æ—Ç gitlab-runner.exe, —á—Ç–æ –∏ —Å–¥–µ–ª–∞–Ω–æ –≤ —ç—Ç–æ–º —à–∞–≥–µ.

–ù–∞ —Ä–∏—Å—É–Ω–∫–µ –Ω–∏–∂–µ –≤–∏–¥–Ω–æ, —á—Ç–æ –æ—Ç—Ä–∞–±–æ—Ç–∞–ª —Å–∫—Ä–∏–ø—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –ø–æ–ª–µ–π –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤: –≤–æ–ø—Ä–æ—Å–∏—Ç–µ–ª—å–Ω—ã–µ –∑–Ω–∞–∫–∏ –≤–º–µ—Å—Ç–æ —Ä—É—Å—Å–∫–æ–≥–æ —è–∑—ã–∫–∞ –∏–∑-–∑–∞ —Ä–µ–≥–∏–æ–Ω–∞–ª—å–Ω—ã—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫, –≤ –¥–æ–∫—É–º–µ–Ω—Ç–µ –≤—Å–µ –±—É–¥–µ—Ç —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ.

![–†–µ–∑—É–ª—å—Ç–∞—Ç –≤ —Å–ø–∏—Å–∫–µ —Ä–∞–±–æ—Ç](/assets/images/posts/2023-03-07-job-result.png)

![–ö–æ–Ω—Å–æ–ª—å](/assets/images/posts/2023-03-07-job-console.png)

### –ß–∏—Å—Ç–∏–º –∏—Å—Ç–æ—Ä–∏—é –ø–∞–π–ø–ª–∞–π–Ω–æ–≤

–ü–æ–∫–∞ —è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–ª–∞ ci/cd, –≤ –ø—Ä–æ–µ–∫—Ç–∞—Ö –æ–±—Ä–∞–∑–æ–≤–∞–ª–∞—Å—å –¥–ª–∏–Ω–Ω–∞—è –∏—Å—Ç–æ—Ä–∏—è —Ä–∞–±–æ—Ç –∏ –ø–∞–π–ø–ª–∞–π–Ω–æ–≤. –í—Ä—É—á–Ω—É—é –∏—Ö —É–¥–∞–ª—è—Ç—å –æ—á–µ–Ω—å –¥–æ–ª–≥–æ, –∞ –∫–Ω–æ–ø–∫–∏ "–ø–æ—á–∏—Å—Ç–∏—Ç—å –∏—Å—Ç–æ—Ä–∏—é" –≤ –≥–∏—Ç–ª–∞–± –µ—â–µ –Ω–µ –∑–∞–≤–µ–∑–ª–∏. 
–ü–æ—ç—Ç–æ–º—É —Ä–µ–∫–æ–º–µ–Ω–¥—É—é –ø—Ä–æ–≤–æ–¥–∏—Ç—å —Ç–µ—Å—Ç—ã –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫—É –Ω–∞ —Ç–µ—Å—Ç–æ–≤–æ–º –ø—Ä–æ–µ–∫—Ç–µ, –∫–æ—Ç–æ—Ä—ã–π –Ω–µ –∂–∞–ª–∫–æ –±—É–¥–µ—Ç –≥—Ä–æ—Ö–Ω—É—Ç—å.
–ï—Å–ª–∏ –∂–µ –≤–∞—Å, –∫–∞–∫ –∏ –º–µ–Ω—è, –±–µ—Å–∏—Ç –≥—Ä—è–∑–Ω–∞—è –∏—Å—Ç–æ—Ä–∏—è `failed` –ø–∞–π–ø–ª–∞–π–Ω–æ–≤, —Ç–æ –º–æ–∂–Ω–æ –ø–æ—á–∏—Å—Ç–∏—Ç—å –∏—Å—Ç–æ—Ä–∏—é —Å–∫—Ä–∏–ø—Ç–æ–º –Ω–∞ Python —Å –±–∏–±–ª–∏–æ—Ç–µ–∫–æ–π [python-gitlab](https://python-gitlab.readthedocs.io/en/stable/index.html):

```python
import gitlab

project_id = 55
gl = gitlab.Gitlab('https://gitlab.blabla.ru/', private_token='TOKEN', api_version='4',ssl_verify=False)
project = gl.projects.get(project_id, obey_rate_limit=False)

for pipeline in project.pipelines.list(as_list=False):
    pipeline.delete()
```

–ï—Å–ª–∏ —É –≤–∞—Å selfhosted GitLab, —Ç–æ –≤–æ–∑–º–æ–∂–Ω–æ –ø—Ä–∏–¥–µ—Ç—Å—è –Ω–µ–º–Ω–æ–≥–æ –¥–æ—Ä–∞–±–æ—Ç–∞—Ç—å —Å–∫—Ä–∏–ø—Ç –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –≤–∞—à–µ–≥–æ SSL, –º–Ω–µ —Ö–≤–∞—Ç–∏–ª–æ –ø—Ä–æ—Å—Ç–æ –æ—Ç–∫–ª—é—á–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É. –í —Å–∫—Ä–∏–ø—Ç–µ –Ω—É–∂–Ω–æ —É–∫–∞–∑–∞—Ç—å ID –ø—Ä–æ–µ–∫—Ç–∞, URL –∏ —Ç–æ–∫–µ–Ω. –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–∫—Ä–∏–ø—Ç 2-3 —Ä–∞–∑–∞ - –∏ —É—Ä–∞, –∏—Å—Ç–æ—Ä–∏—è –ø–∞–π–ø–ª–∞–π–Ω–æ–≤ —á–∏—Å—Ç–∞ –∏ –ø—Ä–µ–∫—Ä–∞—Å–Ω–∞, –∏ –ø–æ–∑–æ—Ä–Ω—ã–µ –æ—à–∏–±–∫–∏ –Ω–∏–∫—Ç–æ –Ω–µ —É–≤–∏–¥–∏—Ç )

## –í–º–µ—Å—Ç–æ —ç–ø–∏–ª–æ–≥–∞

–ü–æ–ª–∞–≥–∞—é, –ø–æ—Å–ª–µ –≤—Å–µ—Ö –ø–µ—Ä–µ–∂–∏—Ç—ã—Ö –ø—Ä–∏–∫–ª—é—á–µ–Ω–∏–π –ª–æ–≥–∏—á–Ω—ã–º —Å–ª–µ–¥—É—é—â–∏–º —ç—Ç–∞–ø–æ–º –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –ø—Ä–∏–∫—Ä—É—á–∏–≤–∞–Ω–∏–µ –∫–∞–∫–æ–≥–æ-–Ω–∏–±—É–¥—å ChatGPT –∏–ª–∏ –∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ–π —Å–µ—Ç–∫–∏ –∫ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏. –ê —Ç–æ —á—Ç–æ, —É –Ω–∞—Å –∑—Ä—è —á—Ç–æ –ª–∏ –æ—Ç–¥–µ–ª –º–∞—à–∏–Ω–Ω–æ–≥–æ –æ–±—É—á–µ–Ω–∏—è —Å–∏–¥–∏—Ç, ~~–µ—Ä—É–Ω–¥–æ–π~~ –≤–∞–∂–Ω—ã–º–∏ –ø—Ä–æ–µ–∫—Ç–∞–º–∏ –∑–∞–Ω–∏–º–∞–µ—Ç—Å—è?
–£–∂–µ –µ—Å—Ç—å –∏–Ω—Ç–µ—Ä–µ—Å–Ω—ã–µ –ø–ª–∞–≥–∏–Ω—ã –¥–ª—è —Ä–µ–¥–∞–∫—Ç–æ—Ä–∞ ObsidianMD –∏ –≤ –æ–±–ª–∞—á–Ω–æ–º Notion, –∫–æ—Ç–æ—Ä—ã–µ –¥–µ–ª–∞—é—Ç –Ω–µ–ø–ª–æ—Ö–∏–µ summary - –¥–ª—è –Ω–∞—É—á–Ω—ã—Ö –æ—Ç—á–µ—Ç–æ–≤ –∏ –æ–±–∑–æ—Ä–æ–≤ –ª–∏—Ç–µ—Ä–∞—Ç—É—Ä—ã –ø—Ä–æ—Å—Ç–æ –æ–≥–æ–Ω—å. –¢–∞–∫–∂–µ –µ—Å—Ç—å –Ω–µ–º–∞–ª–æ –∑–∞–¥–∞—á, –≥–¥–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è –Ω–∞–±—Ä–æ—Å–∞—Ç—å –Ω–µ—Å–ª–æ–∂–Ω—É—é –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—é –ø–æ –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, docker, linux –∏ —Ç.–¥.). 

–ö–∞–∫ –≤—ã –ø–æ–Ω—è–ª–∏, –∫–æ–Ω–µ—á–Ω–∞—è —Ü–µ–ª—å, —á—Ç–æ–±—ã –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–∏—Å–∞–ª–∞—Å—å —Å–∞–º–∞, —è –ø–æ—Ç–µ—Ä—è–ª–∞ —Ä–∞–±–æ—Ç—É –∏ —É—à–ª–∞ —Ä–∞–±–æ—Ç–∞—Ç—å –¥–≤–æ—Ä–Ω–∏–∫–æ–º. –ò—Ö –≤—Ä–æ–¥–µ –Ω–µ —Å–æ–±–∏—Ä–∞—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞—Ç—å, –∑–¥–µ—Å—å –ø–æ–∫–∞ –ª—é–¥–∏ –¥–µ—à–µ–≤–ª–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π.
